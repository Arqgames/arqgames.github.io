<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8" />

    <!-- 画面表示（スマホ対応） -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <!-- 基本SEO -->
    <title>Bible Timeline Quiz</title>
    <meta name="description"
        content="Bible Timeline Quiz is a free browser game where you arrange Bible events in chronological order. Supports Japanese and English." />

    <!-- 検索結果の表示強化（Open Graph / Twitter） -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Bible Timeline Quiz" />
    <meta property="og:description"
        content="A free browser game where you arrange Bible events in chronological order. Supports Japanese and English." />
    <!-- TODO: 公開URLが確定したらここを書き換え（GitHub PagesのURL） -->
    <!-- 例: https://btlq.github.io/ -->
    <meta property="og:url" content="https://arqgames.github.io/btlq/" />

    <!-- TODO: サムネ画像を置く場合（/og.png など） -->
    <!-- <meta property="og:image" content="https://arqgames.github.io/.png" /> -->

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Bible Timeline Quiz" />
    <meta name="twitter:description"
        content="A free browser game where you arrange Bible events in chronological order. Supports Japanese and English." />

    <!-- 表示の雰囲気（任意） -->
    <meta name="theme-color" content="#f4e4bc" />

    <!-- アイコン（任意：後で追加してOK） -->
    <!-- <link rel="icon" href="/favicon.ico" /> -->
    <!-- <link rel="apple-touch-icon" href="/apple-touch-icon.png" /> -->

    <!-- フォント / ライブラリ（あなたの現状を維持） -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <!-- Google adsense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8810957223833437"
        crossorigin="anonymous"></script>

    <link rel="stylesheet" href="/css/ui.css">

</head>

<body>

    <div class="container">
        <button class="top-btn home-btn" type="button" id="homeBtn" title="Home">
            <svg width="22" height="22" viewBox="0 0 24 24" style="display:block;">
                <path d="M12 3.2 3 10.3V21a1 1 0 0 0 1 1h5v-7h6v7h5a1 1 0 0 0 1-1V10.3l-9-7.1z" fill="currentColor" />
            </svg>
        </button>

        <button class="top-btn lang-switch" type="button" id="langBtn" title="Language">EN</button>

        <div id="screen-setup">
            <div class="header-icon-box"><span class="material-icons header-icon">menu_book</span></div>
            <h1 data-ja="聖書年表クイズ" data-en="Bible Timeline Quiz">聖書年表クイズ</h1>

            <div class="quick-btn-container">
                <button class="q-btn full" onclick="quickSet(-4026, 98, this)" data-ja="全期間"
                    data-en="All Periods">全期間</button>

                <button class="q-btn" onclick="quickSet(-4026, -1513, this)" data-ja="創世記〜族長時代"
                    data-en="Genesis & Patriarchs">創世記〜族長時代</button>

                <button class="q-btn" onclick="quickSet(-1513, -1070, this)" data-ja="イスラエル征服"
                    data-en="Conquest">イスラエル征服</button>

                <button class="q-btn" onclick="quickSet(-1070, -2, this)" data-ja="王国の衰退・再建"
                    data-en="Kings, Exile & Return">王国の衰退・再建</button>

                <button class="q-btn" onclick="quickSet(-2, 98, this)" data-ja="キリスト・使徒"
                    data-en="Jesus & Apostles">キリスト・使徒</button>
            </div>

            <div class="picker-group">
                <div class="picker-column"><span style="font-size:0.75em; font-weight:bold;" data-ja="開始"
                        data-en="Start">開始</span><select id="select-start"></select></div>
                <div class="picker-column"><span style="font-size:0.75em; font-weight:bold;" data-ja="終了"
                        data-en="End">終了</span><select id="select-end"></select></div>
            </div>

            <select id="count-select" style="width:100%; margin-top:15px;">
                <option value="3" data-ja="3問 【初級】" data-en="3 Events [Easy]">3問 【初級】</option>
                <option value="5" selected data-ja="5問 【ノーマル】" data-en="5 Events [Normal]">5問 【ノーマル】</option>
                <option value="8" data-ja="8問 【ハード】" data-en="8 Events [Hard]">8問 【ハード】</option>
                <option value="12" data-ja="12問 【レジェンド】" data-en="12 Events [Legend]">12問 【レジェンド】</option>
                <option value="20" data-ja="20問 【ゴッド】" data-en="20 Events [God Mode]">20問 【ゴッド】</option>
            </select>
            <select id="time-attack-select" style="width:100%; margin-top:10px;">
                <option value="off" data-ja="タイムアタック：OFF" data-en="Time Attack: OFF">タイムアタック：OFF</option>
                <option value="on" data-ja="タイムアタック：ON" data-en="Time Attack: ON">タイムアタック：ON</option>
            </select>
            <div id="error-msg"></div>
            <button class="btn" onclick="startGame()" data-ja="冒険を開始" data-en="Start Adventure">冒険を開始</button>
        </div>

        <div id="screen-game" class="hidden">
            <div id="timer-display" style="font-size: 1.5em; font-weight: bold; color: #d63031; margin-bottom: 10px;">
                ⏱ <span id="time-left">00</span>s
            </div>
            <div id="event-list"></div>
            <div id="hint-area" class="hidden"></div>
            <button class="btn" onclick="checkOrder()" data-ja="答え合わせ" data-en="Check Answer">答え合わせ</button>
        </div>

        <div id="screen-result" class="hidden">
            <div class="header-icon-box"><span class="material-icons header-icon" id="result-icon">star</span></div>
            <h2 id="result-title"></h2>
            <div id="fail-options" class="hidden">
                <button class="btn" onclick="showHint()" data-ja="ヒント" data-en="Hint">ヒント</button>
                <button class="btn btn-sub" onclick="retryThisTask()" data-ja="再挑戦" data-en="Retry">再挑戦</button>
            </div>
            <div id="success-options" class="hidden"><button class="btn" onclick="location.reload()" data-ja="次へ"
                    data-en="Next">次へ</button></div>
        </div>
    </div>

    <script>
        let currentLang = 'ja';
        let currentTask = [];
        let timerInterval;
        let timeLeft;
        /* 結果画面の再描画用：直前の勝敗を覚える */
        let lastIsWin = null;
        /* ヒント再描画用：直前に表示したヒントのIDを覚える */
        let lastHintIds = null;
        let lastHintWasEmpty = null;

        const refMap = {
            "Gen": "創", "Exo": "出", "Lev": "レビ", "Num": "民", "Deut": "申",
            "Josh": "ヨシュ", "Judg": "裁", "Ruth": "ルツ", "1Sam": "サム一", "2Sam": "サム二",
            "1Ki": "王一", "2Ki": "王二", "1Chr": "代一", "2Chr": "代二", "Ezra": "エズラ",
            "Neh": "ネヘ", "Esth": "エス", "Job": "ヨブ", "Ps": "詩", "Prov": "箴",
            "Isa": "イザ", "Jer": "エレ", "Lam": "哀", "Ezek": "エゼ", "Dan": "ダニ",
            "Amos": "アモ", "Jonah": "ヨナ", "Mic": "ミカ", "Hab": "ハバ", "Mal": "マラ",
            "Matt": "マタ", "Mark": "マル", "Luke": "ルカ", "John": "ヨハ", "Acts": "使徒",
            "Rom": "ロマ", "1Cor": "コリ一", "2Cor": "コリ二", "Gal": "ガラ", "Eph": "エフェ",
            "Phil": "フィリ", "Col": "コロ", "1Thess": "テサ一", "2Thess": "テサ二", "1Tim": "テモ一",
            "2Tim": "テモ二", "Titus": "テト", "Philem": "フィレ", "Heb": "ヘブ", "Jas": "ヤコ",
            "1Pet": "ペテ一", "2Pet": "ペテ二", "1John": "ヨハ一", "2John": "ヨハ二", "3John": "ヨハ三",
            "Jude": "ユダ", "Rev": "啓"
        };

        const masterEvents = [
            /* --- 1. 人類史の初めから大洪水まで (-4026 〜 -2369) --- */
{id:01000, ja:"アダムの創造", en:"Creation of Adam",
 year:-4026, month:1, day:1, ref:"Gen 2:7", rank:1,
 tags:["Genesis","Creation","ChronologyAnchor"],
 hint_ja:"創5章の父年齢連鎖の起点。5:3以降の累積計算を始める基準として確認",
 hint_en:"Starting anchor for cumulative genealogy ages in Gen 5"},

{id:01500, ja:"セツの誕生", en:"Birth of Seth",
 year:-3896, month:1, day:1, ref:"Gen 5:3", rank:4,
 tags:["Genesis","Genealogy"],
 hint_ja:"創4:25と5:3を見比べ、130年差が年代積算にどう作用するか確認",
 hint_en:"Compare Gen 4:25 & 5:3 to track age offset"},

{id:02000, ja:"エノクの誕生", en:"Birth of Enoch",
 year:-3404, month:1, day:1, ref:"Gen 5:18", rank:4,
 tags:["Genesis","Genealogy"],
 hint_ja:"5章父年齢を連鎖追跡し洪水年代へ収束する流れを観察",
 hint_en:"Trace genealogy chain toward Flood timeline"},

{id:02500, ja:"メトセラ誕生", en:"Birth of Methuselah",
 year:-3339, month:1, day:1, ref:"Gen 5:21", rank:3,
 tags:["Genesis","Lifespan","Chronology"],
 hint_ja:"寿命記録と7:6洪水年を照合し同時代重複を確認",
 hint_en:"Cross-check lifespan with Flood year Gen 7:6"},

{id:03000, ja:"アダムの死", en:"Death of Adam",
 year:-3096, month:1, day:1, ref:"Gen 5:5", rank:3,
 tags:["Genesis","Lifespan"],
 hint_ja:"系譜人物との重複期間を調べ年代連続性を感じ取る",
 hint_en:"Observe overlap continuity with genealogy figures"},

{id:04000, ja:"ノア誕生", en:"Birth of Noah",
 year:-2970, month:1, day:1, ref:"Gen 5:28-29", rank:2,
 tags:["Genesis","Flood","ChronologyAnchor"],
 hint_ja:"7:6の年齢固定点へ接続する重要節点として計算",
 hint_en:"Connect genealogy to Flood anchor age"},

{id:05000, ja:"洪水開始", en:"Flood begins",
 year:-2370, month:11, day:1, ref:"Gen 7:11", rank:1,
 tags:["Genesis","Flood","MajorAnchor"],
 hint_ja:"600歳基準で全系譜積算の到達点を確認",
 hint_en:"Major anchor using Noah age reference"},

{id:06000, ja:"洪水終結", en:"Flood ends",
 year:-2369, month:2, day:27, ref:"Gen 8:14", rank:2,
 tags:["Genesis","Flood"],
 hint_ja:"7:11との比較で期間算出し時間感覚を養う",
 hint_en:"Compare markers to compute duration"},

{id:07000, ja:"バベルの塔", en:"Tower of Babel",
 year:-2269, month:1, day:1, ref:"Gen 11:9", rank:1,
 tags:["Genesis","Nations"],
 hint_ja:"民族表10章と系譜11章の構造差を見比べ年代感把握",
 hint_en:"Compare Gen 10 nations vs Gen 11 chronology"},

{id:08000, ja:"ノアの死", en:"Death of Noah",
 year:-2020, month:1, day:1, ref:"Gen 9:29", rank:4,
 tags:["Genesis","TransitionEra"],
 hint_ja:"洪水後寿命と族長年代重複を確認し時代接続を感じる",
 hint_en:"Observe overlap into patriarch era"},

/* --- 2. 族長時代：アブラハムからヨセフまで (-2020 〜 -1657) --- */

{id:08500, ja:"アブラハム誕生", en:"Birth of Abraham",
 year:-2018, month:1, day:1, ref:"Gen 11:26", rank:2,
 tags:["Patriarch","Genesis","Chronology"],
 hint_ja:"12:4の75歳移動を基準に逆算し年代固定を試す",
 hint_en:"Back-calc from migration age anchor"},

{id:09500, ja:"ハラン出発", en:"Departure from Haran",
 year:-1943, month:1, day:1, ref:"Gen 12:4", rank:1,
 tags:["Patriarch","ChronologyAnchor"],
 hint_ja:"出12:40の430年比較の起点として年代研究の鍵",
 hint_en:"Key anchor for 430-year comparison"},

{id:10600, ja:"イシュマエル誕生", en:"Birth of Ishmael",
 year:-1932, month:1, day:1, ref:"Gen 16:15", rank:3,
 tags:["Patriarch","Genealogy"],
 hint_ja:"17章契約更新との年齢差を比較し配置を確認",
 hint_en:"Compare age gap to covenant renewal"},

{id:11000, ja:"イサク誕生", en:"Birth of Isaac",
 year:-1918, month:1, day:1, ref:"Gen 21:2", rank:1,
 tags:["Patriarch","PromiseLine","Anchor"],
 hint_ja:"族長年代全体の中心固定点として参照",
 hint_en:"Central anchor of patriarch chronology"},

{id:12000, ja:"イサク奉献試練", en:"Binding of Isaac",
 year:-1890, month:1, day:1, ref:"Gen 22:2", rank:2,
 tags:["Patriarch","FaithTest"],
 hint_ja:"誕生節と比較し年齢推定しながら位置把握",
 hint_en:"Estimate placement from birth anchor"},

{id:13000, ja:"ヤコブ誕生", en:"Birth of Jacob",
 year:-1858, month:1, day:1, ref:"Gen 25:26", rank:1,
 tags:["Patriarch","IsraelLine"],
 hint_ja:"47:9寿命情報を照合し後年年代を固定",
 hint_en:"Use lifespan data to anchor later events"},

{id:13600, ja:"ハラン逃亡", en:"Jacob flees",
 year:-1781, month:1, day:1, ref:"Gen 28:10", rank:2,
 tags:["Patriarch","Migration"],
 hint_ja:"31:38の奉仕年数から帰還年を逆算",
 hint_en:"Back-calc via service duration"},

{id:14000, ja:"ヨセフ誕生", en:"Birth of Joseph",
 year:-1767, month:1, day:1, ref:"Gen 30:24", rank:2,
 tags:["Patriarch","EgyptTransition"],
 hint_ja:"41:46の宰相年齢を比較し年代位置固定",
 hint_en:"Anchor using age at elevation"},

{id:15000, ja:"ヨセフ売却", en:"Joseph sold",
 year:-1750, month:1, day:1, ref:"Gen 37:28", rank:1,
 tags:["Patriarch","Egypt"],
 hint_ja:"41章との13年差比較で年表感覚養う",
 hint_en:"Observe 13-year gap to promotion"},

{id:15600, ja:"宰相就任", en:"Joseph elevated",
 year:-1737, month:1, day:1, ref:"Gen 41:41", rank:1,
 tags:["Patriarch","Egypt","ChronologyAnchor"],
 hint_ja:"飢饉年数45章と移住年代を連結して読む",
 hint_en:"Link famine duration to migration timeline"},

{id:16000, ja:"ヤコブ移住", en:"Jacob enters Egypt",
 year:-1728, month:1, day:1, ref:"Gen 46:6", rank:1,
 tags:["Patriarch","Egypt","MajorAnchor"],
 hint_ja:"出12:40の期間計算起点として年代研究必須",
 hint_en:"Start point of Exodus residence calculation"},

{id:16500, ja:"ヨセフ死", en:"Death of Joseph",
 year:-1657, month:1, day:1, ref:"Gen 50:26", rank:2,
 tags:["Patriarch","Transition"],
 hint_ja:"出1:8王交代との時間距離を確認し次時代接続",
 hint_en:"Observe transition into Exodus era"},

 /* --- 3. エジプト脱出とカナン征服 (-1593〜-1450) --- */

{id:17000, ja:"モーセ誕生", en:"Birth of Moses",
 year:-1593, month:1, day:1, ref:"Exo 2:2", rank:2,
 tags:["Exodus","Moses","Chronology"],
 hint_ja:"出7:7の年齢情報と比較し出エジプト時点から逆算して位置確認",
 hint_en:"Back-calc from Moses age at Exodus anchor"},

{id:17500, ja:"ミディアン逃亡", en:"Moses flees to Midian",
 year:-1553, month:1, day:1, ref:"Exo 2:15", rank:3,
 tags:["Exodus","Moses"],
 hint_ja:"使7:23,30の40年区分を比較し人生三分割構造で年代配置",
 hint_en:"Use Acts 7 timeline segments to place event"},

{id:18000, ja:"燃える柴", en:"Burning bush encounter",
 year:-1513, month:1, day:1, ref:"Exo 3:2", rank:1,
 tags:["Exodus","Calling","Anchor"],
 hint_ja:"出7:7と照合し脱出直前年の固定点として読む",
 hint_en:"Pre-Exodus anchor tied to age reference"},

{id:18200, ja:"十の災い", en:"Ten plagues",
 year:-1513, month:1, day:1, ref:"Exo 7:14-12:30", rank:1,
 tags:["Exodus","Plagues"],
 hint_ja:"過越制定節と連続読解し年表の流れ把握",
 hint_en:"Read sequentially with Passover narrative"},

{id:18500, ja:"過越制定", en:"Passover instituted",
 year:-1513, month:4, day:14, ref:"Exo 12:11", rank:1,
 tags:["Exodus","Passover","Anchor"],
 hint_ja:"12:40-41の430年記録と結び年代固定の基準点に",
 hint_en:"Key anchor tied to 430-year statement"},

{id:19000, ja:"出エジプト", en:"The Exodus",
 year:-1513, month:4, day:14, ref:"Exo 12:41", rank:1,
 tags:["Exodus","MajorAnchor"],
 hint_ja:"列王上6:1の480年比較の出発点として必ず参照",
 hint_en:"Starting anchor for 480-year comparison"},

{id:19500, ja:"マナ供給開始", en:"Manna begins",
 year:-1513, month:5, day:1, ref:"Exo 16:15", rank:3,
 tags:["Exodus","Wilderness"],
 hint_ja:"ヨシュ5:12終了節と対比し荒野期間理解",
 hint_en:"Compare with cessation reference later"},

{id:20000, ja:"律法契約", en:"Law covenant established",
 year:-1513, month:6, day:1, ref:"Exo 24:7", rank:1,
 tags:["Exodus","Sinai","Covenant"],
 hint_ja:"19章到着節と連続読解し月差確認",
 hint_en:"Observe timeline from Sinai arrival text"},

{id:20500, ja:"黄金子牛事件", en:"Golden calf incident",
 year:-1513, month:8, day:1, ref:"Exo 32:4", rank:2,
 tags:["Exodus","Apostasy"],
 hint_ja:"山滞在期間40日比較で順序確認",
 hint_en:"Use 40-day interval comparison"},

{id:21000, ja:"幕屋完成", en:"Tabernacle completed",
 year:-1512, month:1, day:1, ref:"Exo 40:17", rank:2,
 tags:["Exodus","Worship"],
 hint_ja:"出12年次比較し翌年構造理解",
 hint_en:"Observe second-year structure"},

{id:22000, ja:"12偵察派遣", en:"Twelve spies sent",
 year:-1512, month:9, day:1, ref:"Num 13:1", rank:2,
 tags:["Wilderness","Recon"],
 hint_ja:"民14裁き節と対比し40年起点確認",
 hint_en:"Link to 40-year judgment statement"},

{id:23000, ja:"カデシュ反逆", en:"Rebellion at Kadesh",
 year:-1512, month:10, day:1, ref:"Num 14:1", rank:1,
 tags:["Wilderness","Judgment"],
 hint_ja:"申2:14の38年比較で放浪期間把握",
 hint_en:"Compare with Deut duration statement"},

{id:23600, ja:"アロン死", en:"Death of Aaron",
 year:-1474, month:5, day:1, ref:"Num 20:28", rank:2,
 tags:["Wilderness","Priesthood"],
 hint_ja:"民33旅程記録と照合し終盤位置確認",
 hint_en:"Cross-check itinerary list placement"},

{id:24000, ja:"モーセ死", en:"Death of Moses",
 year:-1473, month:12, day:1, ref:"Deut 34:5", rank:1,
 tags:["Transition","Leadership"],
 hint_ja:"申1:3と比較し40年終了点として読む",
 hint_en:"End marker of wilderness period"},

{id:25000, ja:"ヨルダン渡河", en:"Jordan crossing",
 year:-1473, month:1, day:10, ref:"Josh 3:15", rank:1,
 tags:["Conquest","Entry","Anchor"],
 hint_ja:"出12:3過越準備節と日付比較して周期感覚養う",
 hint_en:"Compare calendar pattern with Passover text"},

{id:26000, ja:"エリコ陥落", en:"Fall of Jericho",
 year:-1473, month:1, day:17, ref:"Josh 6:20", rank:1,
 tags:["Conquest","Battle"],
 hint_ja:"ヨルダン渡河節との日数差確認し進軍速度理解",
 hint_en:"Observe days gap from crossing narrative"},

{id:26400, ja:"アイ陥落", en:"Fall of Ai",
 year:-1473, month:2, day:1, ref:"Josh 8:19", rank:2,
 tags:["Conquest","Campaign"],
 hint_ja:"アカン事件節と連続読解で順序把握",
 hint_en:"Read alongside Achan narrative sequence"},

{id:26600, ja:"太陽停止", en:"Sun stands still",
 year:-1470, month:1, day:1, ref:"Josh 10:12", rank:3,
 tags:["Conquest","Miracle"],
 hint_ja:"南方遠征節と比較し征服段階理解",
 hint_en:"Place within southern campaign stage"},

{id:27000, ja:"ヨシュア死", en:"Death of Joshua",
 year:-1450, month:1, day:1, ref:"Josh 24:29", rank:2,
 tags:["Conquest","Transition"],
 hint_ja:"士師記冒頭節と比較し時代移行確認",
 hint_en:"Observe transition into Judges era"},
 
 /* --- 4. 裁き人時代とサウル王の時代 (-1394〜-1077) --- */

{id:28000, ja:"オトニエルの解放", en:"Deliverance by Othniel",
 year:-1394, month:1, day:1, ref:"Judg 3:9", rank:2,
 tags:["Judges","Deliverer"],
 hint_ja:"士3:8の支配期間と3:11の安息年数を比較し周期構造確認",
 hint_en:"Compare oppression/rest durations in Judg 3"},

{id:28500, ja:"エフデの解放", en:"Deliverance by Ehud",
 year:-1336, month:1, day:1, ref:"Judg 3:15", rank:2,
 tags:["Judges","Deliverer"],
 hint_ja:"3:14の18年と3:30の80年を対比し累積的でない時代進行理解",
 hint_en:"Observe non-linear timeline segments"},

{id:29000, ja:"デボラの勝利", en:"Victory under Deborah",
 year:-1316, month:1, day:1, ref:"Judg 4:4", rank:1,
 tags:["Judges","Prophet"],
 hint_ja:"4章戦記と5章歌の照合で出来事位置確認",
 hint_en:"Cross-read narrative and song accounts"},

{id:29500, ja:"ギデオン召命", en:"Gideon called",
 year:-1245, month:1, day:1, ref:"Judg 6:12", rank:1,
 tags:["Judges","Midian"],
 hint_ja:"6:1の7年圧迫と8:28の40年安息比較",
 hint_en:"Compare oppression/rest markers"},

{id:30000, ja:"アビメレク支配", en:"Rule of Abimelech",
 year:-1205, month:1, day:1, ref:"Judg 9:6", rank:3,
 tags:["Judges","KingshipAttempt"],
 hint_ja:"8:22王提案と9章統治期間照合し異例性理解",
 hint_en:"Contrast kingship proposal context"},

{id:30500, ja:"エフタ活動", en:"Jephthah judges",
 year:-1187, month:1, day:1, ref:"Judg 11:29", rank:2,
 tags:["Judges","Ammon"],
 hint_ja:"11:26の300年発言と征服年代比較で逆算試行",
 hint_en:"Compare 300-year statement chronologically"},

{id:31000, ja:"サムソン活動", en:"Samson judges",
 year:-1155, month:1, day:1, ref:"Judg 13:24", rank:1,
 tags:["Judges","Philistines"],
 hint_ja:"13:1の40年圧迫と16:31統治年数照合",
 hint_en:"Observe overlap with Philistine dominance"},

{id:32000, ja:"契約の箱奪取", en:"Ark captured",
 year:-1128, month:1, day:1, ref:"1Sam 4:11", rank:1,
 tags:["Samuel","Philistines"],
 hint_ja:"7:2返還期間と比較し士師終末期位置確認",
 hint_en:"Compare Ark return timeline"},

{id:32500, ja:"サムエル裁き", en:"Samuel judges Israel",
 year:-1117, month:1, day:1, ref:"1Sam 7:15", rank:1,
 tags:["Samuel","Transition"],
 hint_ja:"王政要求節8章との前後関係観察",
 hint_en:"Observe transition toward monarchy"},

{id:33000, ja:"サウル王任命", en:"Saul made king",
 year:-1117, month:1, day:1, ref:"1Sam 10:1", rank:1,
 tags:["Monarchy","Saul","Anchor"],
 hint_ja:"13:1統治年数節と照合し王政開始位置確認",
 hint_en:"Anchor monarchy beginning reference"},

{id:33500, ja:"アマレク戦争", en:"War with Amalek",
 year:-1107, month:1, day:1, ref:"1Sam 15:3", rank:2,
 tags:["Saul","Campaign"],
 hint_ja:"王拒絶節と後継指名節比較",
 hint_en:"Compare rejection narrative placement"},

{id:34000, ja:"ダビデ油注ぎ", en:"David anointed",
 year:-1107, month:1, day:1, ref:"1Sam 16:13", rank:1,
 tags:["David","Transition"],
 hint_ja:"サウル在位期間内の並行展開として読む",
 hint_en:"Observe overlapping leadership period"},

{id:34500, ja:"ゴリアテ撃破", en:"Defeat of Goliath",
 year:-1100, month:1, day:1, ref:"1Sam 17:49", rank:2,
 tags:["David","Philistines"],
 hint_ja:"王宮召集節との前後確認",
 hint_en:"Compare palace introduction timing"},

{id:35000, ja:"サウル死", en:"Death of Saul",
 year:-1077, month:1, day:1, ref:"1Sam 31:6", rank:1,
 tags:["Saul","Transition","MajorAnchor"],
 hint_ja:"ダビデ即位節と接続し王国時代開始確認",
 hint_en:"Anchor transition into Davidic monarchy"},
 
/* --- 5. 王国の繁栄から南北分裂まで (-1077〜-897) --- */

{id:36000, ja:"ダビデが王として油注がれる（ヘブロン）", en:"David anointed king in Hebron",
 year:-1077, month:1, day:1, ref:"2Sam 2:4", rank:1,
 tags:["Monarchy","David","Judah","MajorAnchor"],
 hint_ja:"2サム2:11（7年6か月）と5:4,5（全統治40年）を見比べて年数の割り付けを掴む\n「ユダだけ→全イスラエル」へ移る節目",
 hint_en:"Compare 2Sam 2:11 with 2Sam 5:4-5 to map reign lengths\nA clear pivot from Judah-only to all-Israel rule"},

{id:36500, ja:"全イスラエルの王となる", en:"David made king over all Israel",
 year:-1070, month:1, day:1, ref:"2Sam 5:3", rank:1,
 tags:["Monarchy","David","Israel","MajorAnchor"],
 hint_ja:"2サム5:1-5で「統一の即位」と「年数」を同じ段落で確認できる\nここを基準に以後の王国年表が読みやすくなる",
 hint_en:"In 2Sam 5:1-5, unification and reign-length appear together\nUse this as a timeline anchor for the monarchy era"},

{id:37000, ja:"エルサレムを都に", en:"Jerusalem becomes the capital",
 year:-1070, month:1, day:1, ref:"2Sam 5:6-7", rank:2,
 tags:["Monarchy","David","Jerusalem"],
 hint_ja:"5:6-9の都攻略と、6章の箱移送を並べて「都＝崇拝中心」の流れを読む\n年代は即位節（5:3-5）からの相対位置で追える",
 hint_en:"Read 2Sam 5:6-9 alongside ch.6 to see capital + worship center linkage\nDate it relative to David’s reign anchors"},

{id:37500, ja:"契約の箱をエルサレムへ", en:"Ark brought to Jerusalem",
 year:-1070, month:1, day:1, ref:"2Sam 6:15", rank:2,
 tags:["Monarchy","Ark","Jerusalem","Worship"],
 hint_ja:"6:1-15と詩132など関連詩篇を照合すると「箱＝王国神権」の重みが増す\n年数は5:4-5の統治枠内で位置付ける",
 hint_en:"Cross-check 2Sam 6 with related psalms (e.g., Ps 132) for theological weight\nPlace it within the reign framework of 2Sam 5:4-5"},

{id:38000, ja:"王国契約（ダビデ契約）", en:"Covenant for a kingdom (Davidic covenant)",
 year:-1070, month:1, day:1, ref:"2Sam 7:16", rank:1,
 tags:["Monarchy","Covenant","David","Prophecy","MajorAnchor"],
 hint_ja:"2サム7章と詩89を見比べると「王座の約束」の言葉づかいが対応する\n以後の王の評価軸（忠誠か逸脱か）にもなる",
 hint_en:"Compare 2Sam 7 with Ps 89 to see parallel covenant language\nThis becomes a measuring stick for later kings"},

{id:38500, ja:"ダビデの罪とナタンの譴責", en:"David’s sin and Nathan’s rebuke",
 year:-1054, month:1, day:1, ref:"2Sam 12:7", rank:2,
 tags:["Monarchy","David","Discipline"],
 hint_ja:"11章（罪）→12章（譴責）→12:13-14（結果）を連続で読むと因果がはっきりする\n年は統治40年枠（5:4-5）で相対配置できる",
 hint_en:"Read ch.11→12 continuously to trace cause and consequence\nDate it relative to the 40-year reign frame"},

{id:39000, ja:"アブサロムの反逆", en:"Absalom’s rebellion",
 year:-1023, month:1, day:1, ref:"2Sam 15:10", rank:2,
 tags:["Monarchy","David","Crisis"],
 hint_ja:"15章の蜂起と18章の結末を対比すると「王国の揺れ」が見える\nダビデ晩年寄りとして40年統治の終盤へ置く",
 hint_en:"Compare uprising (ch.15) with outcome (ch.18) to sense the kingdom’s instability\nPlace it late within David’s reign"},

{id:39500, ja:"ソロモンが王となる", en:"Solomon becomes king",
 year:-1037, month:1, day:1, ref:"1Ki 1:39", rank:1,
 tags:["Monarchy","Solomon","MajorAnchor"],
 hint_ja:"1王1章（即位）と2:11（ダビデ統治40年）を見比べると世代の切替が鮮明\nここが「神殿年代」へ入る入口",
 hint_en:"Compare 1Ki 1 with 1Ki 2:11 (David’s reign length) for a clear handoff\nGateway into the temple chronology"},

{id:40000, ja:"ソロモンが知恵を求める", en:"Solomon asks for wisdom",
 year:-1037, month:1, day:1, ref:"1Ki 3:9", rank:2,
 tags:["Monarchy","Solomon","Wisdom"],
 hint_ja:"3章の祈りと4:29-34（知恵の広がり）をセットで読むと主題が深まる\n即位直後の出来事として年代配置しやすい",
 hint_en:"Read 1Ki 3 with 1Ki 4:29-34 to see wisdom’s scope\nEasy to date as early-reign context"},

{id:40500, ja:"神殿建設開始（第4年）", en:"Temple construction begins (4th year)",
 year:-1034, month:1, day:1, ref:"1Ki 6:1", rank:1,
 tags:["Monarchy","Temple","Chronology","MajorAnchor"],
 hint_ja:"1王6:1は「出エジプトから480年」＋「ソロモン第4年」の二重アンカー\n年代推理の最重要キーの1つ",
 hint_en:"1Ki 6:1 gives a dual anchor: 480 years from Exodus + Solomon’s 4th year\nOne of the strongest chronology keys"},

{id:41000, ja:"神殿完成（第11年）", en:"Temple finished (11th year)",
 year:-1027, month:1, day:1, ref:"1Ki 6:38", rank:1,
 tags:["Monarchy","Temple","Chronology","MajorAnchor"],
 hint_ja:"6:38（第11年）と6:1（第4年）を比較すると工期が計算できる\n「年数が明記される箇所」は優先して押さえる",
 hint_en:"Compare 1Ki 6:38 (11th year) with 6:1 (4th year) to compute build duration\nExplicit year-markers are prime timeline anchors"},

{id:41500, ja:"神殿奉献と祈り", en:"Temple dedication and Solomon’s prayer",
 year:-1026, month:1, day:1, ref:"1Ki 8:22", rank:2,
 tags:["Monarchy","Temple","Worship"],
 hint_ja:"8章（奉献）と2歴代5-7章（並行記事）を照らすと描写が立体化\n神殿完成直後の流れとして年代配置しやすい",
 hint_en:"Compare 1Ki 8 with 2Chr 5–7 for parallel details\nNaturally placed soon after temple completion"},

{id:42000, ja:"ソロモンの繁栄と国際的名声", en:"Solomon’s prosperity and international fame",
 year:-1000, month:1, day:1, ref:"1Ki 10:1", rank:3,
 tags:["Monarchy","Solomon","Diplomacy"],
 hint_ja:"10章（シバ）と4:20-25（国内繁栄）を並べると「内と外」の繁栄が見える\nただし具体年がないので統治枠（11:42）で相対配置",
 hint_en:"Read 1Ki 10 with 1Ki 4:20-25 for internal vs external prosperity\nDate it relatively within Solomon’s reign frame (1Ki 11:42)"},

{id:42500, ja:"ソロモンの背教と裁きの宣告", en:"Solomon’s apostasy and judgment pronounced",
 year:-1000, month:1, day:1, ref:"1Ki 11:4", rank:2,
 tags:["Monarchy","Solomon","Apostasy"],
 hint_ja:"11:4（心が逸れる）と11:11-13（王国が裂かれる宣告）を続けて読む\n分裂へ向かう「理由」がここで見える",
 hint_en:"Read 1Ki 11:4 together with 11:11-13 to see cause and judgment\nThis sets up the kingdom division"},

{id:43000, ja:"ソロモンの死（40年統治）", en:"Death of Solomon (40-year reign)",
 year:-997, month:1, day:1, ref:"1Ki 11:43", rank:1,
 tags:["Monarchy","Solomon","MajorAnchor"],
 hint_ja:"11:42の「40年統治」が年代固定の要\nダビデ（2サム5:4-5）と並べると王国初期の骨格が固まる",
 hint_en:"Use 1Ki 11:42 (40-year reign) as a firm anchor\nCompare with David’s reign-length to solidify early monarchy structure"},

{id:43500, ja:"王国分裂（レハベアムの時代）", en:"Kingdom divided under Rehoboam",
 year:-997, month:1, day:1, ref:"1Ki 12:19", rank:1,
 tags:["Monarchy","Division","Israel","Judah","MajorAnchor"],
 hint_ja:"12章の原因（重いくびき）と12:19の結論（分裂）をセットで読む\n年代はソロモン死（11:43）直後として連結しやすい",
 hint_en:"Read the cause (1Ki 12) with the outcome (12:19) as a single flow\nChronologically ties directly after Solomon’s death (11:43)"},

{id:44000, ja:"ヤラベアムの金の子牛（北王国の偶像化）", en:"Jeroboam’s golden calves (northern apostasy)",
 year:-997, month:1, day:1, ref:"1Ki 12:28", rank:2,
 tags:["Monarchy","Israel","Idolatry"],
 hint_ja:"12:28-33と13章（預言としるし）を並べると「制度化された偽りの崇拝」が見える\n北王国史はこの起点を覚えると追いやすい",
 hint_en:"Read 1Ki 12:28-33 with ch.13 to see institutionalized false worship\nThis is a key starting point for the northern kingdom timeline"},

{id:44500, ja:"シシャクの侵攻（ユダ）", en:"Shishak invades Judah",
 year:-993, month:1, day:1, ref:"1Ki 14:25-26", rank:2,
 tags:["Monarchy","Judah","Egypt"],
 hint_ja:"1王14:25-26と2歴代12章を比較すると略奪の具体像が増す\n分裂直後の数年目として年代の目安になる",
 hint_en:"Compare 1Ki 14:25-26 with 2Chr 12 for fuller detail\nA useful early marker soon after the division"},

{id:45000, ja:"アハブ王の死（北王国の転機）", en:"Death of King Ahab",
 year:-897, month:1, day:1, ref:"1Ki 22:34", rank:3,
 tags:["Monarchy","Israel","Ahab"],
 hint_ja:"列王記上22章と歴代の補足を照合し「戦死の経緯」を追う\nここを境にエリヤ〜エリシャ期の出来事整理がしやすい",
 hint_en:"Track Ahab’s death narrative in 1Ki 22 for a turning point marker\nHelps organize the Elijah–Elisha era events"},
 
 /* --- 預言者たちの時代とエルサレム滅亡 (-844 〜 -539) --- */

{id:48000, ja:"預言者ヨナの宣教（ニネベ）", en:"Jonah's mission",
  year:-844, month:1, day:1, ref:"Jonah 3:3", rank:2,
  tags:["Prophets","Nineveh","Assyria"],
  hint_ja:"巨大な魚に飲み込まれた後の出来事\n異邦人への警告という点が特徴",
  hint_en:"After being swallowed by a great fish\nNotable as a warning to a foreign city"},

{id:48500, ja:"エリシャの死", en:"Death of Elisha",
  year:-840, month:1, day:1, ref:"2Ki 13:20", rank:4,
  tags:["Prophets","Israel","Elisha"],
  hint_ja:"死後も出来事が語られる預言者\n列王記の流れの中盤の目印",
  hint_en:"A prophet whose account continues even after death\nA mid-point marker within Kings"},

{id:49000, ja:"アモスが預言を始める", en:"Amos starts prophesying",
  year:-804, month:1, day:1, ref:"Amos 1:1", rank:5,
  tags:["Prophets","Israel","Judgment"],
  hint_ja:"ウジヤ王とヤロブアム2世の時代\n北王国の繁栄期に警告が響く",
  hint_en:"During Uzziah and Jeroboam II\nA warning delivered in a time of prosperity"},

{id:49500, ja:"ウジヤ王が重い皮膚病になる", en:"Uzziah becomes leprous",
  year:-770, month:1, day:1, ref:"2Chr 26:19", rank:5,
  tags:["Judah","Kings","Temple"],
  hint_ja:"傲慢になり神殿で香を捧げようとした\n王が退き、共同統治の流れを思い出す",
  hint_en:"Stricken for presumption in the temple\nHelps place the shift toward co-regency"},

{id:50000, ja:"イザヤが預言者に任命される", en:"Isaiah commissioned",
  year:-778, month:1, day:1, ref:"Isa 6:1", rank:3,
  tags:["Prophets","Judah","Isaiah"],
  hint_ja:"「ウジヤ王が死んだ年」が手掛かり\nイザヤ書の長い活動期の起点になる",
  hint_en:"Keyed to 'the year King Uzziah died'\nA starting marker for Isaiah's long ministry"},

{id:50300, ja:"ミカが預言を始める", en:"Micah starts prophesying",
  year:-777, month:1, day:1, ref:"Mic 1:1", rank:3,
  tags:["Prophets","Judah","Messiah"],
  hint_ja:"支配者がベツレヘムから出ると示す\nイザヤと近い時期として並べやすい",
  hint_en:"Points to the ruler coming from Bethlehem\nEasy to bracket near Isaiah's timeframe"},

{id:50500, ja:"ホセアが預言を始める", en:"Hosea starts prophesying",
  year:-748, month:1, day:1, ref:"Hos 1:1", rank:4,
  tags:["Prophets","Israel","Warning"],
  hint_ja:"北王国の霊的崩壊を鋭く告発\nサマリア陥落へ向かう流れの前段",
  hint_en:"A sharp indictment of the northern kingdom\nLeads toward the setting for Samaria's fall"},

{id:51000, ja:"アッシリアによるサマリア陥落", en:"Fall of Samaria",
  year:-740, month:1, day:1, ref:"2Ki 17:6", rank:2,
  tags:["Assyria","Israel","Exile"],
  hint_ja:"北のイスラエル王国が滅亡\nユダへの警告として比較しやすい出来事",
  hint_en:"Northern kingdom ended in exile\nA key comparison point for warnings to Judah"},

{id:51500, ja:"イザヤの預言（処女が身ごもる）", en:"Isaiah's prophecy of Immanuel",
  year:-740, month:1, day:2, ref:"Isa 7:14", rank:2,
  tags:["Isaiah","Prophecy","Messiah"],
  hint_ja:"「見よ、若い女が妊娠して…」の節\n王たちの時代背景と結びつけて覚える",
  hint_en:"Includes 'Look! the young woman will become pregnant'\nTie it to the royal setting in context"},

{id:52000, ja:"ヒゼキヤが王になる", en:"Hezekiah becomes King",
  year:-745, month:1, day:1, ref:"2Ki 18:1", rank:3,
  tags:["Judah","Kings","Reform"],
  hint_ja:"ユダの善良な王の代表格\nアッシリア圧力が強まる時期の王",
  hint_en:"A leading example of a good king of Judah\nReigns as Assyrian pressure intensifies"},

{id:52500, ja:"ヒゼキヤが過越を祝う", en:"Hezekiah's Great Passover",
  year:-740, month:2, day:1, ref:"2Chr 30:1", rank:4,
  tags:["Judah","Worship","Passover"],
  hint_ja:"北の部族にも呼びかけて行った過越\n分裂後でも一致を促した点が印象的",
  hint_en:"Invited even the northern tribes to Jerusalem\nMemorable as an appeal for unity after division"},

{id:52800, ja:"ヒゼキヤのトンネル完成", en:"Hezekiah's Tunnel",
  year:-732, month:1, day:1, ref:"2Ki 20:20", rank:5,
  tags:["Judah","Jerusalem","Assyria"],
  hint_ja:"包囲に備えて水を都へ引き込む工事\nセナケリブ侵入とセットで覚えやすい",
  hint_en:"Secured Jerusalem's water supply for siege\nPairs naturally with Sennacherib's invasion"},

{id:53000, ja:"セナケリブの侵入", en:"Sennacherib invades",
  year:-732, month:1, day:1, ref:"2Ki 19:35", rank:2,
  tags:["Assyria","Judah","Deliverance"],
  hint_ja:"一晩で18万5千が倒れた記述が有名\n包囲と救出の対比が年代の目印になる",
  hint_en:"Known for the 185,000 struck down in one night\nA strong timeline marker of siege vs deliverance"},

{id:53500, ja:"ヒゼキヤの命が15年延びる", en:"Hezekiah's life extended",
  year:-732, month:1, day:2, ref:"2Ki 20:6", rank:4,
  tags:["Judah","Kings","Sign"],
  hint_ja:"15年延命の約束と「しるし」が与えられる\n救出の後の出来事として順番を意識する",
  hint_en:"Promise of 15 more years with a confirming sign\nPlace it after the deliverance narrative"},

{id:54000, ja:"マナセが王になる", en:"Manasseh becomes King",
  year:-716, month:1, day:1, ref:"2Ki 21:1", rank:4,
  tags:["Judah","Kings","Apostasy"],
  hint_ja:"55年統治という長さが手掛かり\n霊的に暗い時代の象徴として覚える",
  hint_en:"His 55-year reign is the standout clue\nOften remembered as a dark spiritual period"},

{id:54500, ja:"マナセの捕囚と悔い改め", en:"Manasseh's repentance",
  year:-670, month:1, day:1, ref:"2Chr 33:12", rank:4,
  tags:["Judah","Repentance","Babylon"],
  hint_ja:"バビロンに連行された後に謙遜になった\n列王記より歴代の補足が年代の助けになる",
  hint_en:"He humbled himself after being taken to Babylon\nChronicles adds detail that helps placement"},

{id:55000, ja:"ヨシアが王になる", en:"Josiah becomes King",
  year:-659, month:1, day:1, ref:"2Ki 22:1", rank:3,
  tags:["Judah","Kings","Reform"],
  hint_ja:"8歳即位と改革がポイント\n滅亡前の「最後の光」のように位置づけられる",
  hint_en:"Known for being crowned at 8 and for reform\nOften viewed as a 'last bright period' before collapse"},

{id:55500, ja:"律法の書が発見される", en:"Book of the Law found",
  year:-642, month:1, day:1, ref:"2Ki 22:8", rank:3,
  tags:["Judah","Temple","Law"],
  hint_ja:"神殿修理中に発見され改革が加速\n申命記との関連を思い出すと覚えやすい",
  hint_en:"Found during temple repairs, fueling reform\nEasy to link with the covenant/Deuteronomy theme"},

{id:56000, ja:"エレミヤが預言を始める", en:"Jeremiah starts prophesying",
  year:-647, month:1, day:1, ref:"Jer 1:2", rank:3,
  tags:["Prophets","Judah","Jeremiah"],
  hint_ja:"ヨシア治世の第13年が鍵\n滅亡へ向かう「警告の声」の中心人物",
  hint_en:"Keyed to Josiah's 13th year\nA central voice of warning on the road to destruction"},

{id:56200, ja:"ゼパニヤの預言", en:"Zephaniah's prophecy",
  year:-640, month:1, day:1, ref:"Zeph 1:1", rank:5,
  tags:["Prophets","Judah","DayOfJehovah"],
  hint_ja:"「エホバの怒りの日」を強調する預言\nヨシア期の警告としてエレミヤと並べやすい",
  hint_en:"Highlights 'the day of Jehovah's anger'\nPairs well near Jeremiah within Josiah's era"},

{id:56400, ja:"ヨシア王の死", en:"Death of King Josiah",
  year:-629, month:1, day:1, ref:"2Ki 23:29", rank:4,
  tags:["Judah","Kings","Egypt"],
  hint_ja:"メギドでネコと戦い戦死した\nこの後、国が急速に傾く流れの合図になる",
  hint_en:"Killed at Megiddo fighting Pharaoh Necho\nA turning point before Judah's rapid decline"},

{id:56600, ja:"ナホムの預言（ニネベの滅亡）", en:"Nahum's prophecy",
  year:-632, month:1, day:1, ref:"Nah 1:1", rank:5,
  tags:["Prophets","Assyria","Nineveh"],
  hint_ja:"血の都ニネベの終わりを宣告\nアッシリア支配の終焉を見据える手掛かり",
  hint_en:"Announces the end of bloody Nineveh\nHelps track the approaching fall of Assyria"},

{id:56800, ja:"ハバククの預言", en:"Habakkuk's prophecy",
  year:-628, month:1, day:1, ref:"Hab 1:1", rank:4,
  tags:["Prophets","Judah","Faith"],
  hint_ja:"「正しい人は忠実さによって生きる」が鍵\nバビロン台頭期の不安と対比して覚える",
  hint_en:"Key line: 'the righteous one will live by faithfulness'\nRemember it against the rise of Babylon"},

{id:57000, ja:"ダニエルがバビロンへ連れ去られる", en:"Daniel taken to Babylon",
  year:-617, month:1, day:1, ref:"Dan 1:1-4", rank:2,
  tags:["Babylon","Exile","Daniel"],
  hint_ja:"捕囚のはじまりを示す出来事として重要\nエルサレム滅亡より前段階での移送",
  hint_en:"A key marker for the beginning phase of exile\nOccurs before Jerusalem's final destruction"},

{id:57500, ja:"ダニエルが夢を解く（巨像）", en:"Daniel interprets the image",
  year:-606, month:1, day:1, ref:"Dan 2:31", rank:2,
  tags:["Babylon","Prophecy","WorldPowers"],
  hint_ja:"金・銀・銅・鉄の世界強国の流れ\n歴史の大枠を示す預言として位置づける",
  hint_en:"Traces world powers (gold to iron)\nA framework prophecy that anchors later history"},

{id:58000, ja:"エルサレム滅亡（バビロン）", en:"Jerusalem destroyed (Babylon)",
  year:-607, month:10, day:1, ref:"2Ki 25:8", rank:1,
  tags:["Jerusalem","Babylon","Destruction"],
  hint_ja:"都と神殿が焼かれた決定的事件\n前後の捕囚記事と比較すると順番が固まる",
  hint_en:"Decisive event: city and temple burned\nCompare nearby exile accounts to lock the sequence"},

{id:58500, ja:"3人の若者が火の炉へ", en:"Three Hebrews in the furnace",
  year:-600, month:1, day:1, ref:"Dan 3:19", rank:2,
  tags:["Babylon","Faith","Deliverance"],
  hint_ja:"偶像礼拝を拒否して守られた\nダニエル記の初期の信仰の試練として覚える",
  hint_en:"Refused idolatry and were rescued\nAn early Daniel marker of tested loyalty"},

{id:59000, ja:"エゼキエルが預言を始める", en:"Ezekiel starts prophesying",
  year:-613, month:1, day:1, ref:"Eze 1:1,2", rank:3,
  tags:["Prophets","Exile","Ezekiel"],
  hint_ja:"捕囚の第5年・ケバル川が手掛かり\nエレミヤとの同時代性を意識すると整理しやすい",
  hint_en:"Keyed to the 5th year of exile by the Chebar\nHelps align Ezekiel alongside Jeremiah's era"},

{id:59500, ja:"ネブカドネザルの狂気", en:"Nebuchadnezzar's madness",
  year:-568, month:1, day:1, ref:"Dan 4:33", rank:3,
  tags:["Babylon","Kings","Humility"],
  hint_ja:"「7つの時」の間、獣のように過ごした\n王の高慢が砕かれる対比が記憶の鍵",
  hint_en:"Lived like a beast for 'seven times'\nThe contrast—pride broken into humility—is the clue"},

{id:59800, ja:"壁の文字（メネ・メネ）", en:"Writing on the wall",
  year:-539, month:10, day:5, ref:"Dan 5:25", rank:3,
  tags:["Babylon","Judgment","Daniel"],
  hint_ja:"ベルシャザルの宴会で裁きが宣告された\nバビロン陥落と同夜の出来事として覚える",
  hint_en:"Judgment announced at Belshazzar's feast\nRemember it as the same night Babylon fell"},

{id:60000, ja:"バビロン陥落", en:"Fall of Babylon",
  year:-539, month:10, day:5, ref:"Dan 5:30", rank:1,
  tags:["Babylon","Persia","Cyrus"],
  hint_ja:"一夜にして帝国が交代した出来事\nダニエル5章の流れで順序が確定する",
  hint_en:"An overnight transfer of empire\nThe sequence in Daniel 5 fixes the order"},

{id:60500, ja:"ダニエルがライオンの穴に", en:"Daniel in the lions' den",
  year:-538, month:1, day:1, ref:"Dan 6:16", rank:2,
  tags:["Persia","Faith","Daniel"],
  hint_ja:"新支配下でも祈りをやめなかった\nバビロン陥落後の時代に置くのが手掛かり",
  hint_en:"He kept praying under the new regime\nPlace it after Babylon's fall to anchor the era"},
 
 /* --- 7. 捕囚からの復興と再建 (-537 〜 -443) --- */
  {id:61000, ja:"エルサレム帰還", en:"Return to Jerusalem", year:-537, month:10, day:1, sortKey:610, ref:"Ezra 1:1", hint_ja:"捕囚されていた民が解放されて戻りました。", hint_en:"Exiles released to go back home.", rank:2},
  {id:61200, ja:"神殿の土台が据えられる", en:"Temple foundation laid", year:-536, month:1, day:1, sortKey:612, ref:"Ezra 3:10", hint_ja:"喜びの声と泣き声が入り混じりました。", hint_en:"A mix of shouts of joy and weeping.", rank:4},
  {id:61500, ja:"ハガイとゼカリヤの預言", en:"Haggai and Zechariah", year:-520, month:1, day:1, sortKey:615, ref:"Ezra 5:1", hint_ja:"神殿の再建を再開するよう民を励ましました。", hint_en:"Encouraged the people to rebuild the temple.", rank:4},
  {id:62000, ja:"再建された神殿の完成", en:"Second Temple finished", year:-515, month:3, day:1, sortKey:620, ref:"Ezra 6:15", hint_ja:"ダリウス1世の治世の第6年です。", hint_en:"In the 6th year of Darius I.", rank:3},
  {id:62500, ja:"ハマンの陰謀", en:"Haman's plot", year:-474, month:1, day:1, sortKey:625, ref:"Est 3:8", hint_ja:"ユダヤ人を全滅させようとする計画。", hint_en:"The conspiracy to annihilate the Jews.", rank:2},
 
  {id:63000, ja:"エステルが王妃になる", en:"Esther becomes Queen", year:-484, month:1, day:1, sortKey:630, ref:"Est 2:16", hint_ja:"アハシュエロス（クセルクセス1世）の時代です。", hint_en:"During the time of Ahasuerus (Xerxes I).", rank:2},
  {id:64000, ja:"エズラがエルサレムに戻る", en:"Ezra returns to Jerusalem", year:-468, month:1, day:1, sortKey:640, ref:"Ezra 7:7", hint_ja:"アルタクセルクセス1世の第7年です。", hint_en:"In the 7th year of Artaxerxes I.", rank:3},
  {id:64500, ja:"ネヘミヤがエルサレムへ", en:"Nehemiah sent to Jerusalem", year:-455, month:1, day:1, sortKey:645, ref:"Neh 2:1", hint_ja:"王の献酌官が都の荒廃を嘆き、遣わされました。", hint_en:"Sent by Artaxerxes to rebuild the city.", rank:2},
  {id:65000, ja:"エルサレムの城壁再建", en:"Rebuilding Jerusalem's Walls", year:-455, month:9, day:1, sortKey:650, ref:"Neh 6:15", hint_ja:"ネヘミヤが52日間で再建しました。", hint_en:"Nehemiah rebuilt it in 52 days.", rank:2},
  {id:65500, ja:"70週の預言が始まる", en:"Prophecy of 70 weeks begins", year:-455, month:1, day:1, sortKey:655, ref:"Dan 9:24", hint_ja:"エルサレム再建の命令が出された時です。", hint_en:"The countdown to the Messiah started.", rank:3},
  {id:66000, ja:"マラキの預言", en:"Malachi's prophecy", year:-443, month:1, day:1, sortKey:660, ref:"Mal 1:1", hint_ja:"ヘブライ語聖書の最後に記録された預言です。", hint_en:"The last prophecy recorded in the Hebrew Scriptures.", rank:4},
  {id:66500, ja:"アレクサンドロス大王の台頭", en:"Rise of Alexander the Great", year:-332, month:1, day:1, sortKey:665, ref:"Dan 8:5", hint_ja:"ギリシャの世界帝国を築きました。", hint_en:"Established the Greek World Power.", rank:2},
  {id:66800, ja:"セプトゥアギンタ訳の開始", en:"Septuagint translation starts", year:-280, month:1, day:1, sortKey:668, ref:"-", hint_ja:"ヘブライ語聖書がギリシャ語に訳されました。", hint_en:"The Hebrew Scriptures translated into Greek.", rank:3},
  
  /* --- 8. イエスの生涯とクリスチャン会衆の誕生 (-2 〜 98) --- */
  {id:67000, ja:"イエスの誕生", en:"Birth of Jesus", year:-2, month:10, day:1, sortKey:670, ref:"Luke 2:7", hint_ja:"「前2年」が聖書通りの誕生の年です。", hint_en:"The year of birth according to Bible prophecy.", rank:1},
  {id:67500, ja:"羊飼いたちがイエスを訪ねる", en:"Shepherds visit Jesus", year:-2, month:10, day:2, sortKey:675, ref:"Luke 2:16", hint_ja:"天使の知らせを聞き、飼い葉おけへ急ぎました。", hint_en:"Found the babe in a manger as told by angels.", rank:5},
  {id:68000, ja:"東方の占星術師たちの訪問", en:"Visit of the Magi", year:-2, month:12, day:1, sortKey:680, ref:"Matt 2:1-12", hint_ja:"ヘロデ王が動揺する出来事でした。", hint_en:"King Herod was deeply disturbed.", rank:4},
  {id:68200, ja:"エジプトへの逃避", en:"Flight to Egypt", year:-1, month:1, day:1, sortKey:682, ref:"Matt 2:14", hint_ja:"ヘロデの殺戮を逃れるため、夢で導かれました。", hint_en:"Fled to escape Herod's murderous decree.", rank:4},
  {id:68500, ja:"ヘロデ大王の死", en:"Death of Herod the Great", year:-1, month:1, day:1, sortKey:685, ref:"Matt 2:19", hint_ja:"彼の死後、イエスの家族はナザレに戻りました。", hint_en:"After his death, the family returned to Nazareth.", rank:4},
  {id:69000, ja:"12歳のイエスが神殿に", en:"12-year-old Jesus in Temple", year:12, month:4, day:1, sortKey:690, ref:"Luke 2:41-49", hint_ja:"「父の家にいるはずであることを知らなかったのですか」。", hint_en:"'Did you not know that I must be in my Father’s house?'", rank:3},
  {id:70000, ja:"バプテスマを施すヨハネの活動開始", en:"John the Baptist begins", year:29, month:4, day:1, sortKey:700, ref:"Luke 3:1-3", hint_ja:"ティベリウス帝の第15年です。", hint_en:"In the 15th year of Tiberius Caesar.", rank:2},
  {id:71000, ja:"イエスのバプテスマ", en:"Baptism of Jesus", year:29, month:10, day:1, sortKey:710, ref:"Matt 3:13-17", hint_ja:"ヨルダン川で宣教の準備が整いました。", hint_en:"Prepared for his ministry in the Jordan.", rank:1},
  {id:71500, ja:"荒野での誘惑", en:"Temptation in the wilderness", year:29, month:10, day:2, sortKey:715, ref:"Matt 4:1", hint_ja:"イエスは40日間断食した後、悪魔に立ち向かいました。", hint_en:"Resisted the Devil after 40 days of fasting.", rank:3},
  {id:72000, ja:"最初の奇跡（カナの婚礼）", en:"First miracle (Cana)", year:30, month:1, day:1, sortKey:720, ref:"John 2:1-11", hint_ja:"水をワインに変えられました。", hint_en:"Turned water into wine.", rank:3},
  {id:72500, ja:"ニコデモとの対話", en:"Conversation with Nicodemus", year:30, month:4, day:1, sortKey:725, ref:"John 3:1", hint_ja:"「新しく生まれなければなりません」。", hint_en:"'You must be born again.'", rank:3},
  {id:73000, ja:"神殿の清め（1回目）", en:"Cleansing the Temple (1st)", year:30, month:4, day:1, sortKey:730, ref:"John 2:13-17", hint_ja:"「わたしの父の家を商売の家とするのをやめなさい」。", hint_en:"'Stop making the house of my Father a house of commerce!'", rank:4},
  {id:73500, ja:"イエスがナザレで拒絶される", en:"Rejected at Nazareth", year:30, month:9, day:1, sortKey:735, ref:"Luke 4:28,29", hint_ja:"故郷の人々はイエスを崖から突き落とそうとしました。", hint_en:"His own townsfolk tried to kill him.", rank:4},
  {id:74000, ja:"サマリアの女性への証言", en:"Witnessing to Samaritan woman", year:30, month:12, day:1, sortKey:740, ref:"John 4:4-42", hint_ja:"シカルの井戸のほとりでの対話です。", hint_en:"Conversation at the well of Sychar.", rank:3},
  {id:74500, ja:"ペテロ、アンデレ、ヤコブ、ヨハネを呼ぶ", en:"Calling of the four fishermen", year:31, month:1, day:1, sortKey:745, ref:"Luke 5:10,11", hint_ja:"「これからは人間を捕る漁師になるのです」。", hint_en:"'From now on you will be catching men alive.'", rank:3},
  {id:75000, ja:"12使徒の選出", en:"Choosing the 12 Apostles", year:31, month:1, day:1, sortKey:750, ref:"Luke 6:12-16", hint_ja:"一晩中祈った後に選ばれました。", hint_en:"Chosen after spending the whole night in prayer.", rank:2},
  {id:76000, ja:"山上の垂訓", en:"Sermon on the Mount", year:31, month:1, day:1, sortKey:760, ref:"Matt 5:1–7:29", hint_ja:"幸福に関する教えなどが含まれています。", hint_en:"Contains the teachings on happiness.", rank:1},
  {id:76200, ja:"ナインの未亡人の息子の復活", en:"Widow's son at Nain raised", year:31, month:6, day:1, sortKey:762, ref:"Luke 7:14", hint_ja:"葬列を止め、若者を生き返らせました。", hint_en:"Stopped the funeral to give back life.", rank:4},
  {id:76300, ja:"嵐を静める", en:"Calming the storm", year:31, month:10, day:1, sortKey:763, ref:"Mark 4:39", hint_ja:"「静まれ！ 黙れ！」と言うと風がやみました。", hint_en:"'Hush! Be quiet!' - and the wind fell.", rank:4},
  {id:76400, ja:"バプテスマを施すヨハネの死", en:"John the Baptist beheaded", year:32, month:3, day:1, sortKey:764, ref:"Mark 6:27", hint_ja:"サロメの願いを聞いたヘロデにより処刑されました。", hint_en:"Executed at the request of Salome.", rank:3},
  {id:76500, ja:"5000人の給食", en:"Feeding of the 5,000", year:32, month:4, day:1, sortKey:765, ref:"John 6:10-13", hint_ja:"5つのパンと2匹の魚で群衆を養いました。", hint_en:"Fed the crowd with five loaves and two fish.", rank:3},
  {id:76600, ja:"イエスが水の上を歩く", en:"Jesus walks on water", year:32, month:4, day:2, sortKey:766, ref:"Matt 14:25", hint_ja:"嵐のガリラヤ湖で弟子たちの前へ。", hint_en:"Appeared to disciples on the sea.", rank:4},
  {id:76700, ja:"イエスの変貌", en:"Transfiguration of Jesus", year:32, month:10, day:1, sortKey:767, ref:"Matt 17:1,2", hint_ja:"山の上で衣が白く光り輝きました。", hint_en:"His face and clothing became brilliant.", rank:3},
  {id:76800, ja:"善いサマリア人のたとえ", en:"Parable of Good Samaritan", year:32, month:11, day:1, sortKey:768, ref:"Luke 10:33", hint_ja:"「隣人とは誰か」を教えた有名なたとえ話。", hint_en:"A lesson on who our neighbor really is.", rank:2},
  {id:76900, ja:"70人の弟子を派遣", en:"Sending of the 70", year:32, month:12, day:1, sortKey:769, ref:"Luke 10:1", hint_ja:"二人ずつ、自分の行く予定の町へ遣わされました。", hint_en:"Sent out in pairs to prepare the way.", rank:4},
  {id:77000, ja:"ラザロの復活", en:"Resurrection of Lazarus", year:33, month:3, day:1, sortKey:770, ref:"John 11:1-44", hint_ja:"ベタニヤでの驚くべき奇跡です。", hint_en:"An amazing miracle in Bethany.", rank:2},
  {id:77200, ja:"ザアカイとの出会い", en:"Zacchaeus the tax collector", year:33, month:3, day:1, sortKey:772, ref:"Luke 19:5", hint_ja:"木に登った背の低い徴税人に声をかけました。", hint_en:"Called down the small man from the sycamore tree.", rank:5},
  {id:77400, ja:"マリアがイエスに香油を注ぐ", en:"Mary anoints Jesus", year:33, month:3, day:27, sortKey:774, ref:"John 12:3", hint_ja:"ベタニヤで高価な香油を足に注ぎました。", hint_en:"Mary of Bethany poured expensive oil.", rank:4},
  {id:78000, ja:"エルサレム入城", en:"Entry into Jerusalem", year:33, month:3, day:28, sortKey:780, ref:"Matt 21:1-11", hint_ja:"子ロバに乗って来られました。", hint_en:"Riding on a colt of a donkey.", rank:2},
  {id:79000, ja:"神殿の清め（2回目）", en:"Cleansing the Temple (2nd)", year:33, month:3, day:29, sortKey:790, ref:"Matt 21:12-17", hint_ja:"死の数日前の出来事です。", hint_en:"Occurred a few days before his death.", rank:3},
  {id:79200, ja:"終わりの日のしるしを予告", en:"Great Prophecy of the Last Days", year:33, month:3, day:30, sortKey:792, ref:"Matt 24:3", hint_ja:"オリーブ山で、将来の出来事を詳細に話しました。", hint_en:"Spoke of wars, famines, and earthquakes.", rank:1},
  {id:79500, ja:"弟子の足を洗う", en:"Jesus washes disciples' feet", year:33, month:4, day:1, sortKey:795, ref:"John 13:5", hint_ja:"謙遜さの究極の手本を示されました。", hint_en:"A lesson in humility at the last supper.", rank:3},
  {id:80000, ja:"最後の晩餐", en:"The Last Supper", year:33, month:4, day:1, sortKey:800, ref:"Luke 22:14-20", hint_ja:"「わたしの記念としてこれを行っていきなさい」。", hint_en:"'Keep doing this in remembrance of me.'", rank:1},
  {id:80500, ja:"新しいおきてを教える", en:"The New Commandment", year:33, month:4, day:1, sortKey:805, ref:"John 13:34", hint_ja:"「わたしがあなた方を愛した通り、互いに愛し合いなさい」。", hint_en:"'Love one another just as I have loved you.'", rank:2},
  {id:81000, ja:"ゲッセマネの祈りと逮捕", en:"Gethsemane and Arrest", year:33, month:4, day:1, sortKey:810, ref:"Matt 26:36-56", hint_ja:"オリーブ山での苦悶と裏切り。", hint_en:"Agony and betrayal on the Mount of Olives.", rank:2},
  {id:81500, ja:"ペテロが三度イエスを否定する", en:"Peter denies Jesus three times", year:33, month:4, day:1, sortKey:815, ref:"Matt 26:75", hint_ja:"鶏が鳴く前に、イエスを知らないと言いました。", hint_en:"Before a rooster crowed, he denied knowing him.", rank:4},
  {id:82000, ja:"イエスの裁判", en:"Trial of Jesus", year:33, month:4, day:1, sortKey:820, ref:"John 18:28", hint_ja:"カヤファ、ピラト、ヘロデの前へ。", hint_en:"Before Caiaphas, Pilate, and Herod.", rank:3},
  {id:82500, ja:"バラバの釈放", en:"Release of Barabbas", year:33, month:4, day:1, sortKey:825, ref:"Matt 27:21", hint_ja:"群衆はイエスの代わりに強盗の釈放を求めました。", hint_en:"The crowd chose a robber over Jesus.", rank:5},
  {id:83000, ja:"イエスの死", en:"Death of Jesus", year:33, month:4, day:1, sortKey:830, ref:"John 19:30", hint_ja:"人類の救いのために亡くなりました。", hint_en:"Died for mankind on Nisan 14.", rank:1},
  {id:83500, ja:"イエスの埋葬", en:"Burial of Jesus", year:33, month:4, day:1, sortKey:835, ref:"John 19:41,42", hint_ja:"アリマタヤのヨセフが用意した新しい墓へ。", hint_en:"Placed in a new tomb by Joseph of Arimathea.", rank:3},
  {id:84000, ja:"イエスの復活", en:"Resurrection of Jesus", year:33, month:4, day:3, sortKey:840, ref:"Matt 28:1-10", hint_ja:"3日目の朝、墓は空でした。", hint_en:"On the third day, the tomb was empty.", rank:1},
  {id:84200, ja:"エマオへの道での現れ", en:"Appearance on the road to Emmaus", year:33, month:4, day:3, sortKey:842, ref:"Luke 24:13-31", hint_ja:"二人の弟子と聖書を論じましたが、最初は気づかれませんでした。", hint_en:"Explained the scriptures while walking.", rank:4},
  {id:84500, ja:"「わたしの羊を養いなさい」", en:"'Feed my little sheep'", year:33, month:5, day:1, sortKey:845, ref:"John 21:17", hint_ja:"復活したイエスがペテロの愛を確認しました。", hint_en:"Jesus reaffirmed Peter's role.", rank:3},
  {id:85000, ja:"イエスの昇天", en:"Ascension of Jesus", year:33, month:5, day:13, sortKey:850, ref:"Acts 1:9", hint_ja:"復活から40日後の出来事です。", hint_en:"40 days after his resurrection.", rank:2},
  {id:85500, ja:"マッテアが使徒に選ばれる", en:"Matthias chosen as apostle", year:33, month:5, day:1, sortKey:855, ref:"Acts 1:26", hint_ja:"裏切ったユダの代わりとして選出されました。", hint_en:"Chosen to replace Judas Iscariot.", rank:5},
  {id:86000, ja:"ペンテコステ（聖霊が注がれる）", en:"Pentecost", year:33, month:5, day:23, sortKey:860, ref:"Acts 2:4", hint_ja:"クリスチャン会衆が誕生しました。", hint_en:"The Christian congregation was born.", rank:1},
  {id:86200, ja:"ペテロとヨハネの逮捕", en:"Peter and John arrested", year:33, month:6, day:1, sortKey:862, ref:"Acts 4:3", hint_ja:"足の不自由な人を癒やした後、当局に捕らえられました。", hint_en:"First persecution after Pentecost.", rank:4},
  {id:86500, ja:"アナニアとサッピラの死", en:"Ananias and Sapphira", year:33, month:12, day:1, sortKey:865, ref:"Acts 5:5-10", hint_ja:"聖霊に対して嘘をつき、倒れて亡くなりました。", hint_en:"Struck dead for lying to the holy spirit.", rank:5},
  {id:87000, ja:"ステファノの殉教", en:"Martyrdom of Stephen", year:34, month:1, day:1, sortKey:870, ref:"Acts 7:54-60", hint_ja:"最初のクリスチャン殉教者です。", hint_en:"The first Christian martyr.", rank:2},
  {id:87500, ja:"フィリポとエチオピアの宦官", en:"Philip and Ethiopian eunuch", year:34, month:1, day:2, sortKey:875, ref:"Acts 8:36", hint_ja:"馬車の上でイザヤの預言を説明しました。", hint_en:"Baptized the eunuch on the road to Gaza.", rank:3},
  {id:88000, ja:"サウロ（パウロ）の改宗", en:"Conversion of Saul", year:34, month:6, day:1, sortKey:880, ref:"Acts 9:1-19", hint_ja:"ダマスカスへの道で光に打たれました。", hint_en:"Struck by light on the road to Damascus.", rank:1},
  {id:89000, ja:"パウロのエルサレム初訪問", en:"Paul's first visit to Jerusalem", year:37, month:1, day:1, sortKey:890, ref:"Acts 9:26", hint_ja:"改宗から3年後のことでした。", hint_en:"Three years after his conversion.", rank:4},
  {id:90000, ja:"コルネリオの転向", en:"Conversion of Cornelius", year:36, month:1, day:1, sortKey:900, ref:"Acts 10:44", hint_ja:"異邦人に初めて聖霊が注がれました。", hint_en:"First Gentile to receive the holy spirit.", rank:1},
  {id:90500, ja:"クリスチャンという名称が始まる", en:"Called Christians in Antioch", year:44, month:1, day:1, sortKey:905, ref:"Acts 11:26", hint_ja:"アンティオキアで初めてそう呼ばれました。", hint_en:"The disciples first called Christians here.", rank:3},
  {id:91000, ja:"使徒ヤコブの処刑", en:"Execution of James", year:44, month:4, day:1, sortKey:910, ref:"Acts 12:1,2", hint_ja:"ヘロデ・アグリッパ1世によって殺されました。", hint_en:"Killed by Herod Agrippa I.", rank:4},
  {id:91200, ja:"ペテロの牢獄からの脱出", en:"Peter's escape from prison", year:44, month:4, day:2, sortKey:912, ref:"Acts 12:7", hint_ja:"天使が鎖を解き、門を開けました。", hint_en:"Miraculously freed by an angel.", rank:4},
  {id:91500, ja:"ヘロデ・アグリッパ1世の死", en:"Death of Herod Agrippa I", year:44, month:6, day:1, sortKey:915, ref:"Acts 12:23", hint_ja:"神に栄光を帰さなかったため、天使に打たれました。", hint_en:"Struck by an angel for not giving glory to God.", rank:4},
  {id:92000, ja:"マタイによる福音書の完成", en:"Gospel of Matthew finished", year:41, month:1, day:1, sortKey:920, ref:"Matt 28:20", hint_ja:"最初に書かれた福音書とされています。", hint_en:"The first Gospel to be written.", rank:2},
  {id:93000, ja:"パウロの第1回宣教旅行開始", en:"Paul's 1st missionary journey", year:47, month:1, day:1, sortKey:930, ref:"Acts 13:1-3", hint_ja:"バルナバと共にアンティオキアから出発。", hint_en:"Set out from Antioch with Barnabas.", rank:2},
  {id:93500, ja:"パウロがルステラで石打ちに遭う", en:"Paul stoned at Lystra", year:48, month:1, day:1, sortKey:935, ref:"Acts 14:19", hint_ja:"一度は死んだと思われ、都の外へ引きずり出されました。", hint_en:"Survived being stoned by a mob.", rank:4},
  {id:94000, ja:"エルサレム会議（割礼問題）", en:"Council in Jerusalem", year:49, month:1, day:1, sortKey:940, ref:"Acts 15:6", hint_ja:"統治体による重要な決定が行われました。", hint_en:"Crucial decision by the governing body.", rank:1},
  {id:94500, ja:"パウロとバルナバの別離", en:"Paul and Barnabas separate", year:49, month:8, day:1, sortKey:945, ref:"Acts 15:39", hint_ja:"マルコを連れて行くかどうかで意見が分かれました。", hint_en:"Split over the issue of John Mark.", rank:5},
  {id:95000, ja:"パウロの第2回宣教旅行開始", en:"Paul's 2nd missionary journey", year:49, month:9, day:1, sortKey:950, ref:"Acts 15:36", hint_ja:"シラスを伴って出発しました。", hint_en:"Set out accompanied by Silas.", rank:2},
  {id:95200, ja:"テモテがパウロに同行する", en:"Timothy joins Paul", year:50, month:1, day:1, sortKey:952, ref:"Acts 16:1", hint_ja:"ルステラでパウロに選ばれた若者。", hint_en:"A young disciple chosen at Lystra.", rank:3},
  {id:95500, ja:"パウロがマケドニアへ渡る", en:"Paul crosses into Macedonia", year:50, month:1, day:1, sortKey:955, ref:"Acts 16:9", hint_ja:"「マケドニアへ渡って来て、私たちを助けてください」。", hint_en:"'Step over into Macedonia and help us.'", rank:3},
  {id:95600, ja:"フィリピの投獄と地震", en:"Jailer at Philippi", year:50, month:1, day:2, sortKey:956, ref:"Acts 16:26", hint_ja:"地震で牢の扉が開き、看守が改宗しました。", hint_en:"Earthquake freed Paul and Silas.", rank:4},
  {id:95800, ja:"アテネのアレオパゴスでの演説", en:"Sermon at Areopagus", year:50, month:1, day:3, sortKey:958, ref:"Acts 17:22", hint_ja:"「知られない神」について哲学者たちに語りました。", hint_en:"Preached to philosophers in Athens.", rank:3},
  {id:96000, ja:"テサロニケ前後書の執筆", en:"1 & 2 Thessalonians written", year:50, month:1, day:1, sortKey:960, ref:"1Thess 1:1", hint_ja:"コリント滞在中に書かれました。", hint_en:"Written while staying in Corinth.", rank:3},
  {id:96200, ja:"ガラテア人への手紙の執筆", en:"Letter to Galatians written", year:52, month:1, day:1, sortKey:962, ref:"Gal 1:1", hint_ja:"割礼主義者たちの教えに対抗して書かれました。", hint_en:"Written against Judaizers.", rank:3},
  {id:97000, ja:"パウロの第3回宣教旅行開始", en:"Paul's 3rd missionary journey", year:52, month:1, day:1, sortKey:970, ref:"Acts 18:23", hint_ja:"エフェソスに長く滞在しました。", hint_en:"Spent a long time in Ephesus.", rank:2},
  {id:97200, ja:"エフェソスでの暴動", en:"Riot in Ephesus", year:55, month:1, day:1, sortKey:972, ref:"Acts 19:24", hint_ja:"銀細工師デメテリオがアルテミス崇拝を守るため扇動しました。", hint_en:"Silversmiths rioted against Paul.", rank:4},
  {id:97500, ja:"コリント人への第一手紙の執筆", en:"1 Corinthians written", year:55, month:1, day:1, sortKey:975, ref:"1Cor 1:1", hint_ja:"エフェソスから、教会の問題に対処するために送られました。", hint_en:"Written from Ephesus to solve issues.", rank:3},
  {id:97800, ja:"コリント人への第二手紙の執筆", en:"2 Corinthians written", year:55, month:1, day:2, sortKey:978, ref:"2Cor 1:1", hint_ja:"マケドニアから送られた、和解の手紙。", hint_en:"Written from Macedonia.", rank:3},
  {id:98000, ja:"ローマ人への手紙の執筆", en:"Letter to the Romans written", year:56, month:1, day:1, sortKey:980, ref:"Rom 1:1", hint_ja:"コリントから送られました。", hint_en:"Sent from Corinth.", rank:2},
  {id:98500, ja:"パウロがエフェソスの長老と面会", en:"Paul meets Ephesian elders", year:58, month:1, day:1, sortKey:985, ref:"Acts 20:17", hint_ja:"ミレトスで最後の別れを告げました。", hint_en:"Emotional farewell at Miletus.", rank:3},
  {id:99000, ja:"パウロの逮捕（エルサレム）", en:"Paul arrested in Jerusalem", year:58, month:5, day:1, sortKey:990, ref:"Acts 21:33", hint_ja:"神殿での騒動の後、連行されました。", hint_en:"Taken away after a riot in the temple.", rank:2},
  {id:99200, ja:"ルカによる福音書の完成", en:"Gospel of Luke finished", year:58, month:1, day:1, sortKey:992, ref:"Luke 1:3", hint_ja:"パウロがカエサレアにいた頃に書かれました。", hint_en:"Written while Paul was in Caesarea.", rank:2},
  {id:99500, ja:"パウロがフェリクス王の前で弁明", en:"Paul before Felix", year:58, month:1, day:1, sortKey:995, ref:"Acts 24:24,25", hint_ja:"カエサレアで2年間拘留されました。", hint_en:"Held in custody for two years in Caesarea.", rank:4},
  {id:99800, ja:"「わたしはカエサルに上訴します！」", en:"'I appeal to Caesar!'", year:59, month:1, day:1, sortKey:998, ref:"Acts 25:11", hint_ja:"フェストゥスの前で、ローマ皇帝による裁判を求めました。", hint_en:"Paul claimed his right as a Roman citizen.", rank:3},
  {id:100000, ja:"パウロのローマ初投獄", en:"Paul's 1st imprisonment in Rome", year:59, month:1, day:1, sortKey:1000, ref:"Acts 28:16", hint_ja:"自分の借りた家に2年間留まりました。", hint_en:"Stayed in his own hired house for two years.", rank:2},
  {id:100200, ja:"エフェソス、コロサイ、フィレモンへの手紙", en:"Ephesians, Colossians, Philemon", year:60, month:1, day:1, sortKey:1002, ref:"Eph 1:1", hint_ja:"最初の投獄中に書かれた「獄中書簡」です。", hint_en:"Letters written while in chains.", rank:3},
  {id:101000, ja:"フィリピ人への手紙の執筆", en:"Letter to Philippians written", year:61, month:1, day:1, sortKey:1010, ref:"Phil 1:1", hint_ja:"喜びにあふれた感謝の手紙。", hint_en:"A letter of joy and gratitude.", rank:3},
  {id:101500, ja:"ヘブライ人への手紙の執筆", en:"Letter to Hebrews written", year:61, month:1, day:1, sortKey:1015, ref:"Heb 1:1", hint_ja:"ユダヤ人クリスチャンに律法の意味を解説しました。", hint_en:"Explained the fulfillment of the Law.", rank:2},
  {id:102000, ja:"使徒行伝の完成", en:"Acts of the Apostles finished", year:61, month:1, day:1, sortKey:1020, ref:"Acts 28:31", hint_ja:"ローマでの宣教の様子で終わっています。", hint_en:"Ends with the preaching in Rome.", rank:2},
  {id:103000, ja:"マルコによる福音書の完成", en:"Gospel of Mark finished", year:60, month:1, day:1, sortKey:1030, ref:"Mark 1:1", hint_ja:"ローマで執筆されたと考えられています。", hint_en:"Thought to have been written in Rome.", rank:2},
  {id:104000, ja:"ヤコブの手紙の執筆", en:"Letter of James written", year:62, month:1, day:1, sortKey:1040, ref:"Jas 1:1", hint_ja:"イエスの異父兄弟ヤコブによる執筆。", hint_en:"Written by James, the half brother of Jesus.", rank:3},
  {id:104200, ja:"テモテ第一、テトスへの手紙", en:"1 Timothy and Titus", year:64, month:1, day:1, sortKey:1042, ref:"1Tim 1:1", hint_ja:"会衆の管理についての指示が含まれています。", hint_en:"Instructions on overseeing the congregation.", rank:3},
  {id:104500, ja:"ペテロ第一・第二の手紙の執筆", en:"1 & 2 Peter written", year:64, month:1, day:1, sortKey:1045, ref:"1Pet 1:1", hint_ja:"バビロンからクリスチャンたちを励ましました。", hint_en:"Encouraged Christians from Babylon.", rank:3},
  {id:104700, ja:"ローマの大火と迫害", en:"Great Fire of Rome", year:64, month:7, day:1, sortKey:1065, ref:"-", hint_ja:"ネロがクリスチャンをスケープゴートにしました。", hint_en:"Nero blamed Christians for the fire.", rank:4},
  {id:104800, ja:"テモテ第二の手紙の執筆", en:"2 Timothy written", year:65, month:1, day:1, sortKey:1048, ref:"2Tim 1:1", hint_ja:"パウロの最後の手紙。「わたしは走り抜きました」。", hint_en:"Paul's final letter before martyrdom.", rank:3},
  {id:105000, ja:"パウロの第2回投獄と死刑", en:"Paul's 2nd imprisonment & death", year:65, month:1, day:1, sortKey:1050, ref:"2Tim 4:6,7", hint_ja:"ネロ帝の迫害下で殉教しました。", hint_en:"Martyred under Nero's persecution.", rank:2},
  {id:106000, ja:"ユダの手紙の執筆", en:"Letter of Jude written", year:65, month:1, day:1, sortKey:1060, ref:"Jude 1", hint_ja:"「信仰のために厳しい戦いをしなさい」。", hint_en:"'Put up a hard fight for the faith.'", rank:3},
  {id:107000, ja:"エルサレム滅亡 (ローマ)", en:"Jerusalem destroyed (Rome)", year:70, month:8, day:1, sortKey:1070, ref:"Luke 21:20", hint_ja:"ティトゥス将軍により徹底的に破壊されました。", hint_en:"Thoroughly destroyed by General Titus.", rank:1},
  {id:108000, ja:"ヨハネがパトモス島へ流刑", en:"John exiled to Patmos", year:96, month:1, day:1, sortKey:1080, ref:"Rev 1:9", hint_ja:"ドミティアヌス帝の時代です。", hint_en:"During the reign of Emperor Domitian.", rank:3},
  {id:109000, ja:"啓示（黙示録）の完成", en:"Revelation completed", year:96, month:1, day:1, sortKey:1090, ref:"Rev 22:21", hint_ja:"パトモス島で与えられた壮大な幻。", hint_en:"Grand visions given on Patmos.", rank:2},
  {id:110000, ja:"ヨハネによる福音書と手紙の完成", en:"John's Gospel and Letters finished", year:98, month:1, day:1, sortKey:1100, ref:"John 21:25", hint_ja:"エフェソス近郊で書かれました。", hint_en:"Written near Ephesus.", rank:2},
  {id:111000, ja:"聖書全巻の完成", en:"Bible canon completed", year:98, month:1, day:1, sortKey:1110, ref:"1John 5:21", hint_ja:"使徒ヨハネの死をもって完結しました。", hint_en:"Completed with the death of Apostle John.", rank:1}
];

        function formatRef(ref) {
            if (currentLang === 'en') return ref;
            let parts = ref.split(' ');
            let bookEn = parts[0];
            let verse = parts[1] || "";
            return verse
                ? (refMap[bookEn] || bookEn) + " " + verse
                : (refMap[bookEn] || bookEn);
        }

        /* ==========================================================
        言語の自動判定（初回アクセス時）
        - 以前ユーザーが手動で選んだ言語があれば、それを優先する
        - それが無ければ、ブラウザの言語設定を見て判定する
        - ja（日本語）なら 'ja'
        - それ以外は全部 'en'
        ========================================================== */
        function detectLanguage() {
            const savedLang =
                localStorage.getItem('arq_lang') ||
                localStorage.getItem('lang') ||
                localStorage.getItem('language') ||
                localStorage.getItem('btlq_lang');

            if (savedLang) { currentLang = savedLang; return; }

            const browserLang = navigator.language || navigator.userLanguage || '';
            currentLang = browserLang.toLowerCase().startsWith('ja') ? 'ja' : 'en';
        }

        function toggleLang() {
            /* JA ⇄ EN を切り替える */
            currentLang = currentLang === 'ja' ? 'en' : 'ja';
            document.documentElement.lang = currentLang;
            /* 次回アクセス時も同じ言語で開くために保存する */
            localStorage.setItem('lang', currentLang);
            /* ボタン表示を更新（今が日本語なら "JA"、英語なら "EN"） */
            document.getElementById('langBtn').innerText =
                currentLang === 'ja' ? 'EN' : 'JA';
            /* data-ja / data-en を持つ要素のテキストをまとめて差し替える */
            document.querySelectorAll('[data-ja]').forEach(el => {
                el.innerText = el.getAttribute('data-' + currentLang);
            });

            /* ゲーム画面のカード表示も今の言語で更新する */
            updateCardTexts();
            /* 年代のセレクトなど、言語依存の表示を再構築する */
            initPickers();
            /* 結果画面（正解/残念/ゲームオーバー）を現在言語で再描画 */
            updateResultTexts();
            /* ヒント表示中なら、ヒント文章を現在言語で再描画 */
            updateHintTexts();
        }

        function updateCardTexts() {
            document.querySelectorAll('.event-card').forEach(card => {
                const data = masterEvents.find(e => e.id == card.dataset.id);
                if (data) card.querySelector('.event-name').innerText = data[currentLang];
            });
        }

        function initPickers() {
            const s = document.getElementById('select-start'), e = document.getElementById('select-end');
            const sOld = s.value, eOld = e.value;
            s.innerHTML = ''; e.innerHTML = '';
            const years = [...new Set(masterEvents.map(ev => ev.year))].sort((a, b) => a - b);
            years.forEach(y => {
                let label = currentLang === 'ja' ? (y < 0 ? `前 ${Math.abs(y)}年` : `西暦 ${y}年`) : (y < 0 ? `BCE ${Math.abs(y)}` : `CE ${y}`);
                s.add(new Option(label, y)); e.add(new Option(label, y));
            });
            if (sOld) s.value = sOld; if (eOld) e.value = eOld;
        }

        function quickSet(sVal, eVal, btn) {
            document.getElementById('select-start').value = sVal;
            document.getElementById('select-end').value = eVal;
            document.querySelectorAll('.q-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            document.getElementById('error-msg').innerText = "";
        }

        function startGame() {
            const s = parseInt(document.getElementById('select-start').value);
            const e = parseInt(document.getElementById('select-end').value);
            const count = parseInt(document.getElementById('count-select').value);
            let filtered = masterEvents.filter(ev => ev.year >= s && ev.year <= e);
            if (filtered.length < count) {
                const msg = currentLang === 'ja' ? `イベントが足りません（現在${filtered.length}個）` : `Not enough events (Only ${filtered.length} available)`;
                document.getElementById('error-msg').innerText = msg;
                return;
            }
            document.getElementById('error-msg').innerText = "";
            currentTask = filtered.sort(() => 0.5 - Math.random()).slice(0, count);

            // タイムアタック設定
            const isTimeAttack = document.getElementById('time-attack-select').value === 'on';
            clearInterval(timerInterval);

            if (isTimeAttack) {
                document.getElementById('timer-display').classList.remove('hidden');
                timeLeft = count * 12;
                updateTimerDisplay();
                timerInterval = setInterval(() => {
                    timeLeft--;
                    updateTimerDisplay();
                    if (timeLeft <= 0) {
                        clearInterval(timerInterval);
                        alert(currentLang === 'ja' ? "時間切れ！" : "Time's Up!");
                        checkOrder();
                    }
                }, 1000);
            } else {
                document.getElementById('timer-display').classList.add('hidden');
            }

            renderGame(true);
            switchScreen('screen-game');
        }

        function updateTimerDisplay() {
            document.getElementById('time-left').innerText = timeLeft;
        }

        function renderGame(shuffle) {
            const list = document.getElementById('event-list');
            list.innerHTML = '';

            let displayList = [...currentTask];
            if (shuffle) displayList.sort(() => 0.5 - Math.random());

            // ✅ 念のため：前回のPCドラッグが中途半端に残ってたら掃除
            draggingItemPC = null;
            if (pcPlaceholder && pcPlaceholder.parentNode) pcPlaceholder.remove();
            pcPlaceholder = null;

            displayList.forEach(item => {
                const el = document.createElement('div');
                el.className = 'event-card';
                el.dataset.id = item.id;

                el.innerHTML =
                    `<span class="material-icons drag-handle" style="color:#ccc">drag_indicator</span>` +
                    `<div class="event-name" style="flex:1">${item[currentLang]}</div>`;

                /* ===== PCドラッグ ===== */
                el.draggable = true;

                el.addEventListener('dragstart', (e) => {
                    draggingItemPC = el;
                    el.classList.add('dragging');

                    // ✅ placeholder を「置換」ではなく「挿入」する（DOMから外さない）
                    const rect = el.getBoundingClientRect();
                    pcPlaceholder = document.createElement('div');
                    pcPlaceholder.className = 'sortable-placeholder';
                    pcPlaceholder.style.height = rect.height + 'px';

                    // 元カードの直後に入れる（元カードの場所を確保）
                    el.parentNode.insertBefore(pcPlaceholder, el.nextSibling);

                    // ✅ drag開始が成立してから元カードを消す（Chrome向けの定番）
                    setTimeout(() => {
                        if (draggingItemPC === el) el.style.display = 'none';
                    }, 0);

                    if (e.dataTransfer) {
                        e.dataTransfer.effectAllowed = 'move';
                        e.dataTransfer.setData('text/plain', 'x'); // 空だとドラッグ開始しない事がある
                    }
                });

                // ✅ drop が来なくても dragend で必ず復帰させる
                el.addEventListener('dragend', () => {
                    if (!draggingItemPC) return;

                    // display:none を戻す
                    draggingItemPC.style.display = '';
                    draggingItemPC.classList.remove('dragging');

                    // placeholder が残ってたら消す
                    if (pcPlaceholder && pcPlaceholder.parentNode) pcPlaceholder.remove();

                    pcPlaceholder = null;
                    draggingItemPC = null;
                });

                /* ===== スマホ ===== */
                el.ontouchstart = handleTouchStart;
                el.ontouchmove = handleTouchMove;
                el.ontouchend = handleTouchEnd;
                el.ontouchcancel = handleTouchEnd;

                list.appendChild(el);
            });

            /* PC: placeholder の移動（マウス位置に合わせて枠だけ動かす） */
            list.ondragover = (e) => {
                e.preventDefault();
                if (!pcPlaceholder) return;

                const after = getDragAfterElement(list, e.clientY);

                if (after == null) list.appendChild(pcPlaceholder);
                else list.insertBefore(pcPlaceholder, after);
            };

            /* PC: drop で確定（placeholder の位置にカードを戻す） */
            list.ondrop = (e) => {
                e.preventDefault();
                if (!draggingItemPC || !pcPlaceholder) return;

                // placeholder の位置にドラッグ元カードを戻す
                list.insertBefore(draggingItemPC, pcPlaceholder);

                // 復帰
                draggingItemPC.style.display = '';
                draggingItemPC.classList.remove('dragging');

                // 掃除
                pcPlaceholder.remove();
                pcPlaceholder = null;
                draggingItemPC = null;
            };
        }

        function getDragAfterElement(container, y) {
            const draggableElements = [...container.querySelectorAll('.event-card:not(.dragging)')];
            return draggableElements.reduce((closest, child) => {
                const box = child.getBoundingClientRect();
                const offset = y - box.top - box.height / 2;
                if (offset < 0 && offset > closest.offset) return { offset: offset, element: child };
                else return closest;
            }, { offset: Number.NEGATIVE_INFINITY }).element;
        }

        let activeItem = null;
        let placeholder = null;

        /* 長押しドラッグ（スクロール優先） */
        let pressTimer = null;
        let isDragging = false;

        let preMoveListener = null;

        let draggingItemPC = null;
        let pcPlaceholder = null;

        function attachPreMoveCancel() {
            if (preMoveListener) return;

            preMoveListener = (ev) => {
                if (!pressTimer || isDragging) return;

                const t = ev.touches[0];
                const dx = t.clientX - startX;
                const dy = t.clientY - startY;
                const dist = Math.hypot(dx, dy);

                // スクロールのつもり → 長押しキャンセル
                if (dist > CANCEL_MOVE_THRESHOLD) {
                    clearTimeout(pressTimer);
                    pressTimer = null;
                    detachPreMoveCancel();
                }
            };

            // ★ここは passive:true でOK（スクロール邪魔しない）
            document.addEventListener('touchmove', preMoveListener, { passive: true });
        }

        function detachPreMoveCancel() {
            if (!preMoveListener) return;
            document.removeEventListener('touchmove', preMoveListener);
            preMoveListener = null;
        }

        /* タッチ開始位置（長押し成立前の移動判定用） */
        let startX = 0;
        let startY = 0;

        /* 好みで調整OK */
        const LONG_PRESS_MS = 200;          // 長押し時間
        const CANCEL_MOVE_THRESHOLD = 10;   // これ以上動いたら長押しキャンセル（px）

        /* 指の位置とカード左上の差分（追従用） */
        let dragOffsetX = 0;
        let dragOffsetY = 0;

        /* 追従を滑らかにするための rAF 制御 */
        let rafId = null;
        let pendingX = 0;
        let pendingY = 0;

        /* ===== 自動スクロール（ドラッグ端） ===== */
        const AUTO_SCROLL_ZONE = 80;   // 画面端から何pxで発動
        const AUTO_SCROLL_MAX = 14;    // 最大速度（px/frame）

        let autoScrollDir = 0;         // -1:上, 0:停止, +1:下
        let autoScrollRaf = null;

        /* 端に近いほど速くする（線形で十分） */
        function calcAutoScrollSpeed(clientY) {
            if (clientY < AUTO_SCROLL_ZONE) {
                const t = (AUTO_SCROLL_ZONE - clientY) / AUTO_SCROLL_ZONE; // 0..1
                return Math.ceil(AUTO_SCROLL_MAX * t);
            }
            if (clientY > window.innerHeight - AUTO_SCROLL_ZONE) {
                const d = clientY - (window.innerHeight - AUTO_SCROLL_ZONE);
                const t = d / AUTO_SCROLL_ZONE; // 0..1
                return Math.ceil(AUTO_SCROLL_MAX * t);
            }
            return 0;
        }

        function setAutoScrollByPointer(clientY) {
            if (clientY < AUTO_SCROLL_ZONE) autoScrollDir = -1;
            else if (clientY > window.innerHeight - AUTO_SCROLL_ZONE) autoScrollDir = 1;
            else autoScrollDir = 0;

            if (autoScrollDir !== 0) startAutoScrollLoop();
            else stopAutoScrollLoop();
        }

        function startAutoScrollLoop() {
            if (autoScrollRaf) return;

            const tick = () => {
                autoScrollRaf = null;

                // ドラッグ中だけ回す
                if (!isDragging) return;

                const speed = calcAutoScrollSpeed(pendingY);

                if (autoScrollDir !== 0 && speed > 0) {
                    window.scrollBy(0, autoScrollDir * speed);

                    // スクロールしたぶんも含めて、ドラッグ中カードを追従更新
                    moveDraggedItem(pendingX, pendingY);

                    // placeholder 判定も「最後の指位置」で更新し続ける
                    updatePlaceholderByPointer(pendingX, pendingY);
                }

                // 端にいる限り回し続ける（止めるのは stopAutoScrollLoop）
                if (autoScrollDir !== 0) {
                    autoScrollRaf = requestAnimationFrame(tick);
                }
            };

            autoScrollRaf = requestAnimationFrame(tick);
        }

        function stopAutoScrollLoop() {
            autoScrollDir = 0;
            if (autoScrollRaf) {
                cancelAnimationFrame(autoScrollRaf);
                autoScrollRaf = null;
            }
        }

        /* placeholder移動ロジックを関数化（handleTouchMove内の後半を移植） */
        function updatePlaceholderByPointer(x, y) {
            if (!placeholder) return;

            // ★保険：自分を一瞬隠して下の要素を正しく拾う
            const prevVis = activeItem?.style.visibility;
            if (activeItem) activeItem.style.visibility = 'hidden';

            const target = document.elementFromPoint(x, y);

            if (activeItem) activeItem.style.visibility = prevVis || '';

            const card = target ? target.closest('.event-card') : null;
            if (!card || card === activeItem || card === placeholder) return;

            const rect = card.getBoundingClientRect();
            if (y < rect.top + rect.height / 2) card.before(placeholder);
            else card.after(placeholder);
        }

        function handleTouchStart(e) {
            // ここではまだドラッグ開始しない（スクロール優先）
            isDragging = false;

            // カードを掴んだ扱いにする
            activeItem = this;
            if (!activeItem) return;

            // 初期タッチ位置（動いたら長押しキャンセルするため）
            const touch = e.touches[0];
            startX = touch.clientX;
            startY = touch.clientY;
            attachPreMoveCancel();

            document.addEventListener(
                'touchend',
                () => {
                    if (!isDragging && pressTimer) {
                        clearTimeout(pressTimer);
                        pressTimer = null;
                    }
                },
                { passive: true, once: true }
            );

            document.addEventListener(
                'touchcancel',
                () => {
                    if (!isDragging && pressTimer) {
                        clearTimeout(pressTimer);
                        pressTimer = null;
                    }
                },
                { passive: true, once: true }
            );

            // 既存タイマーがあればクリア
            if (pressTimer) {
                clearTimeout(pressTimer);
                pressTimer = null;
            }

            // 長押し成立したら「ここで初めてドラッグ開始」
            pressTimer = setTimeout(() => {
                // ★ここに来た時点で、指が離れていたらキャンセルされているはずだが念のため
                if (isDragging) return;
                if (!activeItem) return;

                // ここでドラッグ開始
                isDragging = true;
                // ★ スクロール検知はもう不要
                detachPreMoveCancel();
                activeItem.classList.add('dragging');

                /* ドラッグ中の指の動きを取りこぼさないため */
                document.addEventListener('touchmove', handleTouchMove, { passive: false });
                document.addEventListener('touchend', handleTouchEnd, { passive: false });
                document.addEventListener('touchcancel', handleTouchEnd, { passive: false });

                /* 追従用のオフセット計算（カード左上との差分） */
                const rect = activeItem.getBoundingClientRect();
                dragOffsetX = startX - rect.left;
                dragOffsetY = startY - rect.top;

                /* placeholder を用意（無ければ作る） */
                if (!placeholder) {
                    placeholder = document.createElement('div');
                    placeholder.className = 'sortable-placeholder';
                }
                placeholder.style.height = rect.height + "px";

                // 元の場所を placeholder に置き換える（←これは必要）
                activeItem.replaceWith(placeholder);

                // ★カードはリストに戻さず、body に退避させる
                document.body.appendChild(activeItem);


                /* 見た目：ドラッグ中スタイル */
                activeItem.style.width = rect.width + "px";
                activeItem.style.height = rect.height + "px";
                activeItem.style.position = "fixed";
                activeItem.style.zIndex = "9999";
                activeItem.style.pointerEvents = "none";
                activeItem.style.opacity = "0.9";
                activeItem.style.margin = "0";              // ★ズレ防止
                activeItem.style.boxSizing = "border-box";  // ★念のため
                activeItem.style.left = rect.left + "px";   // ★初期位置固定
                activeItem.style.top = rect.top + "px";

                /* 最初の位置更新（指に追従） */
                moveDraggedItem(startX, startY);

                // タイマーを使い捨てにする
                pressTimer = null;
            }, LONG_PRESS_MS);
        }

        function moveDraggedItem(clientX, clientY) {
            // 指の位置（pending）を更新
            pendingX = clientX;
            pendingY = clientY;

            // すでに rAF が回ってるなら予約だけ更新して終わり
            if (rafId) return;

            rafId = requestAnimationFrame(() => {
                rafId = null;
                if (!activeItem) return;

                const left = pendingX - dragOffsetX;
                const top = pendingY - dragOffsetY;

                activeItem.style.left = left + "px";
                activeItem.style.top = top + "px";
            });
        }

        function handleTouchMove(e) {
            if (!activeItem) return;

            const touch = e.touches[0];
            const x = touch.clientX;
            const y = touch.clientY;

            if (!isDragging) return; // 長押し成立前は何もしない

            e.preventDefault();
            // 追従（pendingX/pendingYが更新される）
            moveDraggedItem(x, y);
            // ★ 自動スクロール判定（端ならスクロール開始）
            setAutoScrollByPointer(y);
            // placeholder 更新（通常）
            updatePlaceholderByPointer(x, y);
        }


        function handleTouchEnd() {
            if (pressTimer) {
                clearTimeout(pressTimer);
                pressTimer = null;
            }

            // ★追加：自動スクロール停止
            stopAutoScrollLoop();

            if (!isDragging) {
                detachPreMoveCancel();
                activeItem = null;
                return;
            }

            isDragging = false;

            if (!activeItem) return;

            if (rafId) {
                cancelAnimationFrame(rafId);
                rafId = null;
            }

            const list = document.getElementById('event-list');

            if (placeholder && list && list.contains(placeholder)) {
                placeholder.replaceWith(activeItem);
                placeholder = null;
            } else if (list && activeItem) {
                list.appendChild(activeItem);
            }

            activeItem.classList.remove('dragging');

            activeItem.style.position = '';
            activeItem.style.left = '';
            activeItem.style.top = '';
            activeItem.style.right = '';
            activeItem.style.bottom = '';
            activeItem.style.width = '';
            activeItem.style.height = '';
            activeItem.style.zIndex = '';
            activeItem.style.pointerEvents = '';
            activeItem.style.margin = '';
            activeItem.style.transform = '';
            activeItem.style.opacity = '1';

            activeItem = null;

            document.removeEventListener('touchmove', handleTouchMove);
            document.removeEventListener('touchend', handleTouchEnd);
            document.removeEventListener('touchcancel', handleTouchEnd);
        }

        // ✅ 共通：正解順ソート（年→月→日→id）
        function sortEventsChrono(a, b) {
            return (a.year - b.year) ||
                ((a.month ?? 1) - (b.month ?? 1)) ||
                ((a.day ?? 1) - (b.day ?? 1)) ||
                (a.id - b.id);
        }

        // ✅ 共通：currentTask から正解ID配列を作る
        function getCorrectIds() {
            if (!Array.isArray(currentTask) || currentTask.length === 0) return [];
            return [...currentTask].sort(sortEventsChrono).map(e => e.id);
        }

        // ✅ 共通：画面上の並び（ID配列）
        function getUserIds() {
            return [...document.querySelectorAll('.event-card')]
                .map(el => parseInt(el.dataset.id, 10))
                .filter(n => Number.isFinite(n));
        }

        // ✅ 共通：配列一致（JSON stringifyより安全）
        function arraysEqual(a, b) {
            if (a.length !== b.length) return false;
            for (let i = 0; i < a.length; i++) if (a[i] !== b[i]) return false;
            return true;
        }

        function checkOrder() {
            clearInterval(timerInterval);

            const userIds = getUserIds();
            const correctIds = getCorrectIds();

            const isWin = (userIds.length > 0) && arraysEqual(userIds, correctIds);

            if (isWin) {
                const fire = (typeof confetti === 'function') ? confetti : (window.confetti || null);
                if (fire) {
                    fire({ particleCount: 150, spread: 70, origin: { x: 0.5, y: 0.5 } });
                }
            }

            showResultScreen(isWin);
        }

        /* ==========================================================
        結果画面の文言を currentLang に合わせて更新する
        - toggleLang() からも呼ばれる
        - 勝敗（lastIsWin）を元に表示を決める
        ========================================================== */
        function updateResultTexts() {
            if (lastIsWin === null) return;
            document.getElementById('result-title').innerText = lastIsWin
                ? (currentLang === 'ja' ? "正解！" : "Correct!")
                : (currentLang === 'ja' ? "残念" : "Oops");
        }

        /* ==========================================================
        ヒント表示の文言を currentLang に合わせて更新する
        - toggleLang() から呼ばれる
        - 直前に表示したヒントの内容（lastHintIds / lastHintWasEmpty）を元に再構築する
        - ヒントが表示中でない場合は何もしない
        ========================================================== */
        function updateHintTexts() {

            /* ヒント領域が存在しないページなら何もしない */
            const hintArea = document.getElementById('hint-area');
            if (!hintArea) return;

            /* ヒントがそもそも表示されていない（hidden）なら何もしない */
            if (hintArea.classList.contains('hidden')) return;

            /* showHint() がまだ一度も呼ばれていないなら何もしない */
            if (lastHintIds === null && lastHintWasEmpty === null) return;

            /* タイトル（見出し） */
            const title = currentLang === 'ja'
                ? "💡 調査の助け:"
                : "💡 Clues for misplaced items:";

            let html = `<strong>${title}</strong><br><br>`;

            /* 「並び順は合っている」ケース */
            if (lastHintWasEmpty) {
                html += currentLang === 'ja'
                    ? "並び順は合っているようです。"
                    : "The order seems correct.";

                hintArea.innerHTML = html;
                return;
            }

            /* 通常ケース：lastHintIds からイベントを引いて再構築 */
            const hints = (lastHintIds || [])
                .map(id => masterEvents.find(e => e.id === id))
                .filter(Boolean);

            /* 念のため：復元できなかったら空扱いにする */
            if (hints.length === 0) {
                html += currentLang === 'ja'
                    ? "並び順は合っているようです。"
                    : "The order seems correct.";

                hintArea.innerHTML = html;
                return;
            }

            hints.forEach(s => {
                const hintDesc = s['hint_' + currentLang] || "";
                html += `<div class="hint-item">
                    ・${s[currentLang]} (${formatRef(s.ref)})
                    <span class="hint-desc">${hintDesc}</span>
                 </div>`;
            });

            hintArea.innerHTML = html;
        }

        function showResultScreen(isWin) {

            /* 直前の勝敗を保存（言語切替時に再描画するため） */
            lastIsWin = isWin;

            switchScreen('screen-result');
            const difficulty = parseInt(
                document.getElementById('count-select').value
            );

            /* アイコンだけはここで決定してOK */
            document.getElementById('result-icon').innerText =
                isWin ? "celebration" : "book";

            document.getElementById('fail-options').className = isWin ? "hidden" : "";
            document.getElementById('success-options').className = isWin ? "" : "hidden";

            /* ★ 結果タイトルは必ずここで一括更新 */
            updateResultTexts();
        }

        function showHint() {
            const hintArea = document.getElementById('hint-area');
            if (!hintArea) return;

            const userIds = getUserIds();
            const correctIds = getCorrectIds();

            // まだゲームが成立してない保険
            if (userIds.length === 0 || correctIds.length === 0) {
                lastHintIds = [];
                lastHintWasEmpty = true;
                hintArea.innerHTML =
                    `<strong>${currentLang === 'ja' ? "💡 調査の助け:" : "💡 Clues:"}</strong><br><br>` +
                    (currentLang === 'ja' ? "まだ並び替え対象がありません。" : "No items to check yet.");
                hintArea.classList.remove('hidden');
                switchScreen('screen-game');
                return;
            }

            // id → 正しい位置
            const posMap = {};
            correctIds.forEach((id, idx) => posMap[id] = idx);

            // 異常系（重複・欠落・外部ID）
            const userSet = new Set(userIds);
            const correctSet = new Set(correctIds);
            const hasDuplicate = userSet.size !== userIds.length;
            const hasOutOfTask = userIds.some(id => !correctSet.has(id));
            const hasMissing = correctIds.some(id => !userSet.has(id));

            // 最初の「逆転している隣接ペア」を探す
            let conflictPairIds = null;
            for (let i = 0; i < userIds.length - 1; i++) {
                const a = userIds[i];
                const b = userIds[i + 1];
                const pa = posMap[a];
                const pb = posMap[b];
                if (pa == null || pb == null) continue; // task外は保険で無視
                if (pa > pb) { conflictPairIds = [a, b]; break; }
            }

            // ヒント対象（最大2）
            const hintsToShow = conflictPairIds
                ? conflictPairIds.map(id => masterEvents.find(e => e.id === id)).filter(Boolean)
                : [];

            // 言語切替の再描画用に保存
            lastHintIds = hintsToShow.map(e => e.id);
            lastHintWasEmpty = (hintsToShow.length === 0) && !(hasDuplicate || hasOutOfTask || hasMissing);

            const title = currentLang === 'ja'
                ? "💡 調査の助け:"
                : "💡 Clues for misplaced items:";

            let html = `<strong>${title}</strong><br><br>`;

            // まずはセット異常を優先表示
            if (hasDuplicate || hasOutOfTask || hasMissing) {
                if (currentLang === 'ja') {
                    html += "並びの内容に問題があるようです。<br>";
                    if (hasDuplicate) html += "・同じカードが重複している可能性があります。<br>";
                    if (hasOutOfTask) html += "・課題に含まれないカードが混ざっています。<br>";
                    if (hasMissing) html += "・課題に必要なカードが欠けています。<br>";
                    html += "<br>まずはカードの種類と枚数を整えてください。";
                } else {
                    html += "There seems to be a problem with the set of items.<br>";
                    if (hasDuplicate) html += "• Some items may be duplicated.<br>";
                    if (hasOutOfTask) html += "• An item not in this task is included.<br>";
                    if (hasMissing) html += "• A required item is missing.<br>";
                    html += "<br>Please fix the set of cards first.";
                }
            } else if (hintsToShow.length === 0) {
                // セット正常＆逆転なし → 並び順OK（少なくとも「逆転」はない）
                html += currentLang === 'ja'
                    ? "並び順は合っているようです。"
                    : "The order seems correct.";
            } else {
                // 逆転ペアの比較ヒント（あなたの意図どおり）
                for (const ev of hintsToShow) {
                    const name = ev[currentLang] || ev.ja || "";
                    const hintDesc = ev['hint_' + currentLang] || ev.hint_ja || "";
                    html += `<div class="hint-item">・${name} (${formatRef(ev.ref)})`;
                    if (hintDesc) html += `<span class="hint-desc">${hintDesc}</span>`;
                    html += `</div>`;
                }
            }

            hintArea.innerHTML = html;
            hintArea.classList.remove('hidden');
            switchScreen('screen-game');

            // タイムアタックONの場合のみタイマー再始動（timeLeftは維持）
            const isTimeAttack = document.getElementById('time-attack-select')?.value === 'on';
            if (isTimeAttack) {
                clearInterval(timerInterval);
                timerInterval = setInterval(() => {
                    timeLeft--;
                    updateTimerDisplay();
                    if (timeLeft <= 0) {
                        clearInterval(timerInterval);
                        alert(currentLang === 'ja' ? "時間切れ！" : "Time's Up!");
                        checkOrder();
                    }
                }, 1000);
            }
        }

        function retryThisTask() {
            document.getElementById('hint-area').classList.add('hidden');
            renderGame(false);
            switchScreen('screen-game');

            const isTimeAttack = document.getElementById('time-attack-select').value === 'on';
            if (isTimeAttack) {
                const count = parseInt(document.getElementById('count-select').value);
                timeLeft = count * 15;
                updateTimerDisplay();
                clearInterval(timerInterval);
                timerInterval = setInterval(() => {
                    timeLeft--;
                    updateTimerDisplay();
                    if (timeLeft <= 0) {
                        clearInterval(timerInterval);
                        alert(currentLang === 'ja' ? "時間切れ！" : "Time's Up!");
                        checkOrder();
                    }
                }, 1000);
            }
        }

        function switchScreen(id) {
            document.getElementById('screen-setup').classList.add('hidden');
            document.getElementById('screen-game').classList.add('hidden');
            document.getElementById('screen-result').classList.add('hidden');
            document.getElementById(id).classList.remove('hidden');
        }
        /* ページを開いた瞬間にやること（初期化） */
        window.onload = () => {

            /* 1) ブラウザ言語 or 保存済み言語を見て currentLang を決める */
            detectLanguage();
            document.documentElement.lang = currentLang;

            /* 2) 言語ボタン（JA/EN）の表示を currentLang に合わせる */
            const langBtn = document.getElementById('langBtn');
            if (langBtn) {
                langBtn.innerText = currentLang === 'ja' ? 'EN' : 'JA';
            }

            /* 3) data-ja / data-en の文言を currentLang の言語に切り替える
                  ※ これをやらないと、HTMLに直書きされた初期表示のままになる */
            document.querySelectorAll('[data-ja]').forEach(el => {
                el.innerText = el.getAttribute('data-' + currentLang);
            });

            /* 4) 年代セレクト等を currentLang で描画する（BCE/CE表示も含む） */
            initPickers();

            /* 5) 初期の開始/終了をセット（select が存在するページだけ） */
            const startSel = document.getElementById('select-start');
            const endSel = document.getElementById('select-end');
            if (startSel && endSel) {
                startSel.value = -4026;
                endSel.value = 98;
            }
        };


        document.addEventListener('DOMContentLoaded', () => {
            // --- HOME ---
            const homeBtn = document.getElementById('homeBtn');
            if (homeBtn) {
                homeBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    location.href = '/';
                });
            }

            // --- LANG（確実版）---
            const langBtn0 = document.getElementById('langBtn');
            if (langBtn0) {
                // 既存のonclick / addEventListener を全部剥がすためにボタンを差し替える
                const langBtn = langBtn0.cloneNode(true);
                langBtn0.parentNode.replaceChild(langBtn, langBtn0);

                // キャプチャで最優先、他の処理を止める
                langBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    if (e.stopImmediatePropagation) e.stopImmediatePropagation();

                    // まず「既存の関数」があればそれを呼ぶ（壊さない）
                    if (typeof window.toggleLang === 'function') { window.toggleLang(); return; }
                    if (typeof window.toggleLanguage === 'function') { window.toggleLanguage(); return; }
                    if (typeof window.switchLanguage === 'function') { window.switchLanguage(); return; }
                    if (typeof window.setLanguage === 'function') { window.setLanguage(); return; }


                    // 無ければ localStorage を “複数キー” に保存（実装違いを吸収）
                    const saved =
                        localStorage.getItem('arq_lang') ||
                        localStorage.getItem('lang') ||
                        localStorage.getItem('language') ||
                        localStorage.getItem('btlq_lang');

                    const current = saved || (navigator.language && navigator.language.startsWith('ja') ? 'ja' : 'en');
                    const next = (current === 'ja') ? 'en' : 'ja';

                    localStorage.setItem('arq_lang', next);
                    localStorage.setItem('lang', next);
                    localStorage.setItem('language', next);
                    localStorage.setItem('btlq_lang', next);

                    // もしグローバルに applyLang があるなら即反映
                    if (typeof window.applyLang === 'function') {
                        window.applyLang(next);
                        return;
                    }

                    // 無ければリロードして初期化に任せる（確実）
                    location.reload();
                }, true); // ← capture=true が重要
            }
        });

    </script>

    <footer style="margin-top:40px; padding:20px 0; border-top:1px solid #ddd; font-size:14px; text-align:center;">
        <a href="/about.html" target="_blank" rel="noopener noreferrer" style="margin:0 10px;">
            About
        </a>
        <a href="/privacy.html" target="_blank" rel="noopener noreferrer" style="margin:0 10px;">
            Privacy Policy
        </a>
        <a href="/contact.html" target="_blank" rel="noopener noreferrer" style="margin:0 10px;">
            Contact
        </a>
    </footer>


</body>

</html>
